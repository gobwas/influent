!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.influent=t()}(this,function(){var e;return(e=function t(n,r,i){function s(u,a){if(!r[u]){if(!n[u]){var c="function"==typeof e&&e;if(!a&&c)return c(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[u]={exports:{}};n[u][0].call(f.exports,function(e){var t=n[u][1][e];return s(t?t:e)},f,f.exports,t,n,r,i)}return r[u].exports}for(var o="function"==typeof e&&e,u=0;u<i.length;u++)s(i[u]);return s}({1:[function(e,t,n){function r(e){this.options=s.extend({},this.constructor.DEFAULTS,e)}{var i=e("inherits-js"),s=e("./../utils");e("assert")}r.prototype={constructor:r,ping:function(){throw new TypeError("Method 'query' must be implemented")},query:function(e){throw new TypeError("Method 'query' must be implemented")},writeOne:function(e){throw new TypeError("Method 'writeOne' must be implemented")},writeMany:function(e){throw new TypeError("Method 'writeMany' must be implemented")}},r.DEFAULTS={precision:null,epoch:null},r.extend=function(e,t){return i(this,e,t)},n.Client=r},{"./../utils":11,assert:"assert","inherits-js":25}],2:[function(e,t,n){function r(e){var t,n,r,i,s;if(e instanceof u)return e;if(o(c.isObject(e),"Object is expected"),o(c.isString(t=e.key),"Key is expected to be a string"),n=new u(t),r=e.fields,c.isUndefined(r)||(o(c.isObject(r),"Fields is expected to be an object"),c.forEachIn(r,function(e,t){e instanceof a?n.addField(t,e):c.isObject(e)?n.addField(t,new a(e.data,e.type)):n.addField(t,new a(e))})),i=e.tags,c.isUndefined(i)||(o(c.isObject(i),"Tags is expected to be an object"),c.forEachIn(i,function(e,t){n.addTag(t,e)})),s=e.timestamp,!c.isUndefined(s))if(c.isString(s))n.setTimestamp(s);else if(c.isNumber(s))n.setTimestamp(s.toString());else{if(!(s instanceof Date))throw Error("String, Number, or Date is expected");n.setTimestamp(s.getTime().toString())}return n}var i,s=e("./client").Client,o=e("assert"),u=e("../measurement").Measurement,a=e("../value").Value,c=e("../utils");i=s.extend({injectClient:function(e){o(e instanceof s,"Client is expected"),this.client=e},query:function(e){return this.client.query(e)},ping:function(){return this.client.ping()},writeMany:function(e,t){return o(c.isArray(e),"Array is expected"),this.client.writeMany(e.map(r),t)},writeOne:function(e,t){return this.client.writeOne(r(e),t)}}),n.DecoratorClient=i},{"../measurement":6,"../utils":11,"../value":12,"./client":1,assert:"assert"}],3:[function(e,t,n){function r(e,t,n){i(s.isString(e),"String is expected for protocol"),i(s.isString(t),"String is expected for host"),i(s.isNumber(n),"Number is expected for port"),this.protocol=e,this.host=t,this.port=n}var i=e("assert"),s=e("./../utils");r.prototype={constructor:r,toString:function(){return this.protocol+"://"+this.host+":"+this.port}},n.Host=r},{"./../utils":11,assert:"assert"}],4:[function(e,t,n){var r,i=e("./client").Client,s=e("./info").Info,o=e("../serializer/serializer").Serializer,u=e("../measurement").Measurement,a=e("./host").Host,c=e("assert"),l=e("hurl/lib/http").Http,f=e("../utils"),p=e("../precision");r=i.extend({constructor:function(e){i.prototype.constructor.apply(this,arguments),c(f.isObject(e),"options is expected to be an Object"),c(f.isString(e.username),"options.username is expected to be a string"),c(f.isString(e.password),"options.password is expected to be a string"),c(f.isString(e.database),"options.database is expected to be a string"),f.isUndefined(e.max_batch)||c(f.isNumber(e.max_batch),"options.max_batch is expected to be a number"),f.isUndefined(e.chunk_size)||c(f.isNumber(e.chunk_size),"options.chunk_size is expected to be a number"),p.assert(e.precision,!0,"options.precision is expected to be null or one of %values%"),p.assert(e.epoch,!0,"options.epoch is expected to be null or one of %values%"),this.hosts=[],this.lastHealthCheck=-1,this.activeHost=null},injectHttp:function(e){c(e instanceof l,"Http is expected"),this.http=e},injectSerializer:function(e){c(e instanceof o,"Serializer is expected"),this.serializer=e},addHost:function(e){c(e instanceof a,"Host is expected"),this.hosts.push(e)},getHost:function(){var e,t=this;return e=!this.activeHost||this.lastHealthCheck+this.options.health_check_duration<=Date.now()?f.any(this.hosts.map(function(e){return t._pingHost(e).then(function(){return e})})).then(function(e){return t.activeHost=e,t.lastHealthCheck=Date.now(),e}):Promise.resolve(this.activeHost)},ping:function(){var e=this;return f.any(this.hosts.map(function(t){return e._pingHost(t).then(function(e){return{info:e,host:t}})}))},query:function(e,t){var n=this;return c(f.isString(e),"String is expected"),t=t||{},f.isUndefined(t.chunk_size)||c(f.isNumber(t.chunk_size),"options.chunk_size is expected to be a number"),p.assert(t.epoch,!0,"options.epoch is expected to be null or one of %values%"),t=f.extend({},this.options,f.pick(t,"epoch","chunk_size")),this.getHost().then(function(r){var i;return i={},f.isString(t.epoch)&&(i.epoch=t.epoch),f.isNumber(t.chunk_size)&&(i.chunk_size=t.chunk_size),n.http.request(r.toString()+"/query",{method:"GET",auth:{username:t.username,password:t.password},query:f.extend(i,{db:t.database,q:e})}).then(function(e){switch(e.statusCode){case 200:return JSON.parse(e.body);case 401:return Promise.reject(new Error("InfluxDB unauthorized user"));default:return Promise.reject(new Error("InfluxDB unsuccessful status code: "+e.statusCode))}})})},writeOne:function(e,t){return c(e instanceof u,"Measurement is expected"),this.writeMany([e],t)},writeMany:function(e,t){var n=this;return c(f.isArray(e),"Array is expected"),t=t||{},f.isUndefined(t.max_batch)||c(f.isNumber(t.max_batch),"options.max_batch is expected to be a number"),p.assert(t.precision,!0,"options.precision is expected to be null or one of %values%"),t=f.extend({},this.options,f.pick(t,"precision","max_batch")),Promise.all(f.chunks(e,t.max_batch).map(function(e){return Promise.all(e.map(function(e){return n.serializer.serialize(e)})).then(function(e){return n._writeData(e.join("\n"),t)})}))},_pingHost:function(e){return this.http.request(e.toString()+"/ping",{method:"HEAD"}).then(function(e){var t,n,r;return 204!=e.statusCode?Promise.reject(new Error("Ping error: "+e.statusCode+": "+e.body)):(t=new s,n=e.headers["x-influxdb-version"],n&&t.setVersion(n),r=e.headers.date,r&&t.setDate(new Date(r)),t)})},_writeData:function(e,t){var n=this;return this.getHost().then(function(r){var i={};return f.isString(t.precision)&&(i.precision=t.precision),n.http.request(r.toString()+"/write",{method:"POST",auth:{username:t.username,password:t.password},query:f.extend(i,{db:t.database}),data:e}).then(function(e){return new Promise(function(t,n){if(204==e.statusCode)return t();switch(e.statusCode){case 200:return n(new Error("InfluxDB could not complete request: "+e.body.toString()));case 401:return n(new Error("InfluxDB unauthorized user"));case 400:return n(new Error("InfluxDB invalid syntax"));default:return n(new Error("InfluxDB unknown status code: "+e.statusCode))}})})})}},{DEFAULTS:f.extend({},i.DEFAULTS,{max_batch:5e3,health_check_duration:18e5})}),n.HttpClient=r},{"../measurement":6,"../precision":7,"../serializer/serializer":9,"../utils":11,"./client":1,"./host":3,"./info":5,assert:"assert","hurl/lib/http":19}],5:[function(e,t,n){function r(){this.version=null,this.date=null}var i=e("assert"),s=e("../utils");r.prototype.setVersion=function(e){i(s.isString(e),"String is expected"),this.version=e},r.prototype.setDate=function(e){i(e instanceof Date,"Date is expected"),this.date=e},n.Info=r},{"../utils":11,assert:"assert"}],6:[function(e,t,n){function r(e){s(o.isString(e),"String is expected"),this.key=e,this.tags={},this.fields={},this.timestamp=null}var i=e("./value").Value,s=e("assert"),o=e("./utils");r.prototype={constructor:r,addTag:function(e,t){return s(o.isString(e),"String is expected"),s(o.isString(t),"String is expected"),s(0==this.tags.hasOwnProperty(e),"Tag with key '"+e+"' is already set"),this.tags[e]=t,this},addField:function(e,t){return s(o.isString(e)),s(t instanceof i,"Value is expected"),s(0==this.fields.hasOwnProperty(e),"Field with key '"+e+"' is already set"),this.fields[e]=t,this},setTimestamp:function(e){s(o.isNumericString(e),"Numeric string is expected :"+e),this.timestamp=e}},n.Measurement=r},{"./utils":11,"./value":12,assert:"assert"}],7:[function(e,t,n){var r=e("assert"),i=e("./utils"),s=0,o=1,u=2,a=3,c=4,l=5,f=[s,o,u,a,c,l],p={};p[s]="n",p[o]="u",p[u]="ms",p[a]="s",p[c]="m",p[l]="h",n.PRECISION=f,n.NANOSECONDS=s,n.MICROSECONDS=o,n.MILLISECONDS=u,n.SECONDS=a,n.MINUTES=c,n.HOURS=l,n.MAP=p,n.assert=function(e,t,n){var s=i.values(p);r((t?null==e:!1)||-1!=s.indexOf(e),n.replace("%values%",s.join(",")))}},{"./utils":11,assert:"assert"}],8:[function(e,t,n){function r(e,t){Object.keys(e).sort(function(e,t){return t>e?-1:e>t?1:0}).forEach(function(n){t.call(null,e[n],n,e)})}var i,s,o,u,a,c,l=e("./serializer").Serializer,f=e("../measurement").Measurement,p=e("../type").STRING,h=e("../type").BOOLEAN,d=e("../type").INT64,g=e("../type").FLOAT64,m=e("assert"),y=e("../utils");s=function(){var e=/ /g,t=/,/g;return function(n){return m(y.isString(n),"String is expected"),n.replace(e,"\\ ").replace(t,"\\,")}}(),o=function(){var e=/"/g;return function(t){var n;return m(y.isString(t),"String is expected"),n=t.replace(e,'\\"'),'"'+n+'"'}}(),u=function(e){return m(y.isBoolean(e),"Boolean is expected"),e?"t":"f"},c=function(e){var t;return m(y.isNumber(e),"Number is expected"),t=e.toString(),m(-1==t.indexOf("."),"Converting to integer, but float given"),t+"i"},a=function(e){return m(y.isNumber(e),"Number is expected"),e.toString()},i=l.extend({serialize:function(e){return m(e instanceof f,"Measurement is expected"),new Promise(function(t){var n,i;n=s(e.key),r(e.tags,function(e,t){n+=","+s(t)+"="+s(e)}),r(e.fields,function(){var e,t;return function(r,i){var l;switch(e?t=",":(t=" ",e=!0),r.type){case p:l=o(r.data);break;case h:l=u(r.data);break;case d:l=c(r.data);break;case g:l=a(r.data);break;default:return Promise.reject(new TypeError("Unable to determine action for value type"))}n+=t+s(i)+"="+l}}()),(i=e.timestamp)&&(n+=" "+i),t(n)})}}),n.LineSerializer=i},{"../measurement":6,"../type":10,"../utils":11,"./serializer":9,assert:"assert"}],9:[function(e,t,n){function r(){}var i=e("inherits-js");r.prototype={constructor:r,serialize:function(e){throw new TypeError("Method 'serialize' must be implemented")}},r.extend=function(e,t){return i(this,e,t)},n.Serializer=r},{"inherits-js":25}],10:[function(e,t,n){var r=e("./utils"),i=0,s=1,o=2,u=3,a=[i,s,o,u];n.getInfluxTypeOf=function(e){var t=r.getTypeOf(e);switch(t){case"String":return i;case"Number":return s;case"Boolean":return u;default:throw new TypeError("Could not map to the influx type: got '"+t+"'")}},n.STRING=i,n.FLOAT64=s,n.INT64=o,n.BOOLEAN=u,n.TYPE=a},{"./utils":11}],11:[function(e,t,n){var r=e("assert");n.noop=function(){},n.getTypeOf=function(){var e=/\[object ([A-Z][a-z]+)\]/;return function(t){return Object.prototype.toString.call(t).replace(e,"$1")}}(),n.forEachIn=function(e,t){null!=e&&"object"==typeof e&&Object.keys(e).forEach(function(n){t.call(null,e[n],n,e)})},n.extend=function(e){return[].slice.call(arguments).forEach(function(t){n.forEachIn(t,function(t,n){e[n]=t})}),e},n.values=function(e){var t=[];return n.forEachIn(e,function(e){t.push(e)}),t},n.pick=function(e,t){var r,i;return r=n.isArray(t)?t:Array.prototype.slice.call(arguments,1),i={},n.forEachIn(e,function(e,t){-1!=r.indexOf(t)&&(i[t]=e)}),i},n.isMatch=function(e,t){var n,r,i,s;for(i=Object.keys(t),s=i.length,n=0;s>n;n++)if(r=i[n],e[r]!==t[r])return!1;return!0},n.findWhere=function(e,t){var r,i,s,o;for(o=_.isFunction(t)?t:function(e){return n.isMatch(e,t)},i=e.length,r=0;i>r;r++)if(s=e[r],o.call(null,s))return s;return null},["Object","String","Number","Boolean","Array","Undefined"].forEach(function(e){n["is"+e]=function(t){return n.getTypeOf(t)==e}}),n.isNumericString=function(){var e=/^\d*$/;return function(t){return n.isString(t)&&e.test(t)}}(),n.flatten=function(e){return e.reduce(function(e,t){return e.concat(n.isArray(t)?n.flatten(t):t)},[])},n.chunks=function(e,t){var i,s,o,u;for(r(n.isArray(e),"Array is expected to be a source"),r(n.isNumber(t),"Number is expected to be a size"),r(t>0,"Size must be a positive number"),i=0,o=[];;){if(s=i*t,u=e.slice(s,s+t),0==u.length)break;o.push(u),i++}return o},n.any=function(e){return new Promise(function(t,n){var r,i,s;s=e.length,r=!1,i=0,e.forEach(function(e){e.then(function(e){r||(r=!0,t(e))})["catch"](function(e){r||++i!=s||n(e)})})})}},{assert:"assert"}],12:[function(e,t,n){function r(e,t){void 0!=t?o(-1!=i.indexOf(t),"Type is unknown"):t=s(e),this.data=e,this.type=t}var i=e("./type").TYPE,s=e("./type").getInfluxTypeOf,o=e("assert");n.Value=r},{"./type":10,assert:"assert"}],13:[function(e,t,n){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],14:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],15:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),a(r,e,r.depth)}function s(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function a(e,t,r){if(e.customInspect&&t&&j(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=a(e,i,r)),i}var s=c(e,t);if(s)return s;var o=Object.keys(t),g=u(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),_(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(t);if(0===o.length){if(j(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(O(t))return e.stylize(Date.prototype.toString.call(t),"date");if(_(t))return l(t)}var y="",v=!1,x=["{","}"];if(d(t)&&(v=!0,x=["[","]"]),j(t)){var w=t.name?": "+t.name:"";y=" [Function"+w+"]"}if(E(t)&&(y=" "+RegExp.prototype.toString.call(t)),O(t)&&(y=" "+Date.prototype.toUTCString.call(t)),_(t)&&(y=" "+l(t)),0===o.length&&(!v||0==t.length))return x[0]+y+x[1];if(0>r)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=v?f(e,t,r,g,o):o.map(function(n){return p(e,t,r,g,n,v)}),e.seen.pop(),h(S,y,x)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var s=[],o=0,u=t.length;u>o;++o)s.push(C(t,String(o))?p(e,t,n,r,String(o),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||s.push(p(e,t,n,r,i,!0))}),s}function p(e,t,n,r,i,s){var o,u,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),C(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(c.value)<0?(u=m(n)?a(e,c.value,null):a(e,c.value,n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),w(o)){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function h(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return null==e}function v(e){return"number"==typeof e}function b(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function w(e){return void 0===e}function E(e){return S(e)&&"[object RegExp]"===A(e)}function S(e){return"object"==typeof e&&null!==e}function O(e){return S(e)&&"[object Date]"===A(e)}function _(e){return S(e)&&("[object Error]"===A(e)||e instanceof Error)}function j(e){return"function"==typeof e}function z(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function A(e){return Object.prototype.toString.call(e)}function k(e){return 10>e?"0"+e.toString(10):e.toString(10)}function T(){var e=new Date,t=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":");return[e.getDate(),H[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var D=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,o=String(e).replace(D,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];s>n;u=r[++n])o+=m(u)||!S(u)?" "+u:" "+i(u);return o},n.deprecate=function(e,i){function s(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return s};var N,L={};n.debuglog=function(e){if(w(N)&&(N=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(N)){var r=t.pid;L[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else L[e]=function(){};return L[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=y,n.isNumber=v,n.isString=b,n.isSymbol=x,n.isUndefined=w,n.isRegExp=E,n.isObject=S,n.isDate=O,n.isError=_,n.isFunction=j,n.isPrimitive=z,n.isBuffer=e("./support/isBuffer");var H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":14,_process:16,inherits:13}],16:[function(e,t,n){function r(){l=!1,u.length?c=u.concat(c):f=-1,c.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u[f].run();f=-1,t=c.length}u=null,l=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var u,a=t.exports={},c=[],l=!1,f=-1;a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new s(e,t)),1!==c.length||l||setTimeout(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],17:[function(e,t,n){var r,i=e("inherits-js");r=i(Error,{constructor:function(){var e;e=Error.apply(null,arguments),this._error=e,this.message=e.message,this.stack=e.stack?e.stack.replace(new RegExp("^Error"),this.name):null}},{extend:function(e,t){return i(this,e,t)}}),n.HttpError=r},{"inherits-js":25}],18:[function(e,t,n){var r,i=e("../error").HttpError;r=i.extend({}),n.TimeoutHttpError=r},{"../error":17}],19:[function(e,t,n){var r,i=e("./utils"),s=e("inherits-js"),o=e("assert"),u=e("debug"),a=e("events").EventEmitter;r=s(a,{constructor:function(e){var t=this;a.call(this),this.options=i.extend({},this.constructor.DEFAULTS,e),this.logger=["debug","info","notice","warning","error","critical","alert","emergency"].reduce(function(e,n){var r;return r=u("hurl:"+n),e[n]=function(){var e;e=Array.prototype.slice.call(arguments),r.apply(null,e),t.emit.apply(t,["log:"+n].concat(e))},e},{})},injectUUID:function(e){o(i.isEmpty(this.uuid),"UUID is already set"),o("function"==typeof e,"UUID is expected to be a function"),this.uuid=e},genUUID:function(e){return o(i.isUndefined(e)||i.isString(e),"String is expected"),this.uuid?this.uuid.call(null,e):i.uniqueId(e)},request:function(e,t){throw new Error("Method must be implemented")}},{extend:function(e,t){return s(this,e,t)},DEFAULTS:{}}),n.Http=r},{"./utils":20,assert:"assert",debug:22,events:"events","inherits-js":25}],20:[function(e,t,n){function r(e){return Object.prototype.toString.call(e).replace(/\[object ([A-Z][a-z]+)\]/,"$1")}function i(e,t,r){return t.forEach(function(t){n.forEach(t,function(t,n){r&&void 0!==e[n]||(e[n]=t)})}),e}["String","Object","Array","Undefined"].forEach(function(e){n["is"+e]=function(t){return r(t)==e}}),n.defaults=function(e){return i(e,[].slice.call(arguments,1),!0)},n.extend=function(e){return i(e,[].slice.call(arguments,1),!1)},n.forEach=function(e,t){return n.isArray(e)?void e.forEach(t):n.isObject(e)?void Object.keys(e).forEach(function(n){t.call(null,e[n],n,e)}):void 0},n.isEmpty=function(e){return null==e?!0:n.isArray(e)||n.isString(e)?0===e.length:0===Object.keys(e).length},n.contains=function(e,t){return-1!=e.indexOf(t)};var s={},o=0;n.uniqueId=function(e){return n.isString(e)?(n.isUndefined(s[e])&&(s[e]=0),++s[e]):++o}},{}],21:[function(e,t,n){var r,i=e("./http").Http,s=e("./utils"),o=e("./error").HttpError,u=e("querystring"),a=e("./error/timeout").TimeoutHttpError;r=i.extend({request:function(e,t){var n,r,i=this;return r={href:e,uuid:this.genUUID("req.out")},t=s.defaults(t||{},{method:"GET"}),n=this.getTime(),new Promise(function(c,l){var f,p,h,d,g,m,y,v;if(f=t.method,h=t.data,s.contains(["GET","HEAD"],f)&&h)throw y=new o("Could not add body to the GET|HEAD requests"),i.logger.fatal("Http request could not be prepared",{context:t,error:y,namespace:"http",tags:"error"}),y;s.isEmpty(p=t.query)||(e=e+(-1!==e.indexOf("?")?"&":"?")+u.encode(p)),v=new XMLHttpRequest,(m=t.headers)&&s.forEach(m,function(e,t){v.setRequestHeader(t,e)}),(g=t.timeout)&&(v.timeout=g),v.ontimeout=function(){l(new a)},v.onabort=function(){l(new o("Aborted"))},v.onerror=function(e){l(new o)},v.onreadystatechange=function(){var e,t,o,u;4==this.readyState&&(e=this.status,t=this.responseText,o=i.extractHeaders(v.getAllResponseHeaders()),u=i.byteLength(t)/1024,i.logger.debug("Received http response",{namespace:"http",tags:"http,response",context:s.extend({duration:i.getTime()-n,body:10>u?t:"...",length:Math.ceil(u)+"KB",status:e,headers:o},r)}),c({body:t,statusCode:e,headers:o}))},i.logger.debug("Sending http request",{context:s.extend({},t,r),namespace:"http",tags:"http,request"});try{v.open(f,e,!0)}catch(b){return void l(b)}(d=t.auth)&&v.setRequestHeader("Authorization",i.getAuthString(d.username,d.password)),v.send(h)})},getTime:function(){return(new Date).getTime()},byteLength:function(e){for(var t=e.length,n=e.length-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&2047>=r?t++:r>2047&&65535>=r&&(t+=2),r>=56320&&57343>=r&&n--}return t},extractHeaders:function(){var e;return e=/([a-z\-]+):\s*([^\n]+)\n?/gi,function(t){var n,r;for(n={};r=e.exec(t);)n[r[1].toLowerCase()]=r[2];return n}}(),getAuthString:function(e,t){return"Basic "+btoa([e,t].map(function(e){return decodeURIComponent(e)}).join(":"))}}),n.XhrHttp=r},{"./error":17,"./error/timeout":18,"./http":19,"./utils":20,querystring:"querystring"}],22:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,s=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))}),e.splice(s,0,r),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function u(){var e;try{e=n.storage.debug}catch(t){}return e}function a(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=s,n.formatArgs=i,n.save=o,n.load=u,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:a(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(u())},{"./debug":23}],23:[function(e,t,n){function r(){return n.colors[l++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,s=t-(c||t);e.diff=s,e.prev=c,e.curr=t,c=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var o=Array.prototype.slice.call(arguments);o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var u=0;o[0]=o[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;u++;var i=n.formatters[r];if("function"==typeof i){var s=o[u];t=i.call(e,s),o.splice(u,1),u--}return t}),"function"==typeof n.formatArgs&&(o=n.formatArgs.apply(e,o));var a=i.log||n.log||console.log.bind(console);a.apply(e,o)}t.enabled=!1,i.enabled=!0;var s=n.enabled(e)?i:t;return s.namespace=e,s}function s(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;r>i;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function o(){n.enable("")}function u(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i,n.coerce=a,n.disable=o,n.enable=s,n.enabled=u,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var c,l=0},{ms:24}],24:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*a;case"seconds":case"second":case"secs":case"sec":case"s":return n*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=c?Math.round(e/c)+"h":e>=a?Math.round(e/a)+"m":e>=u?Math.round(e/u)+"s":e+"ms"}function s(e){return o(e,l,"day")||o(e,c,"hour")||o(e,a,"minute")||o(e,u,"second")||e+" ms"}function o(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var u=1e3,a=60*u,c=60*a,l=24*c,f=365.25*l;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?s(e):i(e)}},{}],25:[function(e,t,n){var r=e("./utils/extend");t.exports=function(e,t,n){function i(){}var s;return t=t||{},n=n||{},s=t.hasOwnProperty("constructor")&&"function"==typeof t.constructor?t.constructor:function(){e.apply(this,arguments)},r(s,e,n),i.prototype=e.prototype,s.prototype=new i,r(s.prototype,t),s.prototype.constructor=s,s}},{"./utils/extend":27}],26:[function(e,t,n){t.exports=function(e,t,n){var r;n||(n=null);for(var i in e)if(e.hasOwnProperty(i)&&(r=t.call(n,e[i],i,e),void 0!==r))return r;return r}},{}],27:[function(e,t,n){var r=e("./each");t.exports=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=function(t,n){e[n]=t},i=0;i<t.length;i++)r(t[i],n);return e}},{"./each":26}],28:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var a=e.length;u>0&&a>u&&(a=u);for(var c=0;a>c;++c){var l,f,p,h,d=e[c].replace(o,"%20"),g=d.indexOf(n);g>=0?(l=d.substr(0,g),f=d.substr(g+1)):(l=d,f=""),p=decodeURIComponent(l),h=decodeURIComponent(f),r(s,p)?Array.isArray(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s}},{}],29:[function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var s=encodeURIComponent(r(i))+n;return Array.isArray(e[i])?e[i].map(function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[i]))}).join(t):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(e)):""}},{}],assert:[function(e,t,n){function r(e,t){return h.isUndefined(t)?""+t:h.isNumber(t)&&!isFinite(t)?t.toString():h.isFunction(t)||h.isRegExp(t)?t.toString():t}function i(e,t){return h.isString(e)?e.length<t?e:e.slice(0,t):e}function s(e){return i(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,r),128)}function o(e,t,n,r,i){throw new m.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function u(e,t){e||o(e,!0,t,"==",m.ok)}function a(e,t){if(e===t)return!0;if(h.isBuffer(e)&&h.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return h.isDate(e)&&h.isDate(t)?e.getTime()===t.getTime():h.isRegExp(e)&&h.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:h.isObject(e)||h.isObject(t)?l(e,t):e==t}function c(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(h.isNullOrUndefined(e)||h.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(h.isPrimitive(e)||h.isPrimitive(t))return e===t;var n=c(e),r=c(t);if(n&&!r||!n&&r)return!1;if(n)return e=d.call(e),t=d.call(t),a(e,t);var i,s,o=y(e),u=y(t);if(o.length!=u.length)return!1;for(o.sort(),u.sort(),s=o.length-1;s>=0;s--)if(o[s]!=u[s])return!1;for(s=o.length-1;s>=0;s--)if(i=o[s],!a(e[i],t[i]))return!1;return!0}function f(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function p(e,t,n,r){var i;h.isString(n)&&(r=n,
n=null);try{t()}catch(s){i=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&o(i,n,"Missing expected exception"+r),!e&&f(i,n)&&o(i,n,"Got unwanted exception"+r),e&&i&&n&&!f(i,n)||!e&&i)throw i}var h=e("util/"),d=Array.prototype.slice,g=Object.prototype.hasOwnProperty,m=t.exports=u;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=s(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=t.name,u=r.indexOf("\n"+i);if(u>=0){var a=r.indexOf("\n",u+1);r=r.substring(a+1)}this.stack=r}}},h.inherits(m.AssertionError,Error),m.fail=o,m.ok=u,m.equal=function(e,t,n){e!=t&&o(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&o(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){a(e,t)||o(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){a(e,t)&&o(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&o(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){e===t&&o(e,t,n,"!==",m.notStrictEqual)},m["throws"]=function(e,t,n){p.apply(this,[!0].concat(d.call(arguments)))},m.doesNotThrow=function(e,t){p.apply(this,[!1].concat(d.call(arguments)))},m.ifError=function(e){if(e)throw e};var y=Object.keys||function(e){var t=[];for(var n in e)g.call(e,n)&&t.push(n);return t}},{"util/":15}],events:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,a,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),a=1;r>a;a++)s[a-1]=arguments[a];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),a=1;r>a;a++)s[a-1]=arguments[a];for(c=n.slice(),r=c.length,a=0;r>a;a++)c[a].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],influent:[function(e,t,n){function r(e){return new p(e.protocol,e.host,e.port)}var i=e("./lib/client/client").Client,s=e("./lib/client/http").HttpClient,o=e("./lib/client/decorator").DecoratorClient,u=e("./lib/serializer/serializer").Serializer,a=e("./lib/serializer/line").LineSerializer,c=e("./lib/value").Value,l=e("./lib/measurement").Measurement,f=e("hurl/lib/xhr").XhrHttp,p=e("./lib/client/host").Host,h=e("./lib/type"),d=e("assert"),g=e("./lib/utils");n.Client=i,n.HttpClient=s,n.Serializer=u,n.LineSerializer=a,n.Value=c,n.Measurement=l,n.Host=p,n.type=h,n.createClient=function(e){var t,n,i;if(d(g.isObject(e),"Object is expected for config"),n=e.server,g.isObject(n))t=[r(n)];else{if(!g.isArray(n))throw new Error("Object or Array is expected for config.server");t=n.map(r)}return i=new s(e),i.injectSerializer(new a),i.injectHttp(new f),t.forEach(function(e){i.addHost(e)}),i.ping().then(function(){var e;return e=new o,e.injectClient(i),e})}},{"./lib/client/client":1,"./lib/client/decorator":2,"./lib/client/host":3,"./lib/client/http":4,"./lib/measurement":6,"./lib/serializer/line":8,"./lib/serializer/serializer":9,"./lib/type":10,"./lib/utils":11,"./lib/value":12,assert:"assert","hurl/lib/xhr":21}],querystring:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":28,"./encode":29}]},{},[]))("influent")});