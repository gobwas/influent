!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.influent=t()}(this,function(){var e;return(e=function t(n,r,i){function s(u,c){if(!r[u]){if(!n[u]){var a="function"==typeof e&&e;if(!c&&a)return a(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[u]={exports:{}};n[u][0].call(f.exports,function(e){var t=n[u][1][e];return s(t?t:e)},f,f.exports,t,n,r,i)}return r[u].exports}for(var o="function"==typeof e&&e,u=0;u<i.length;u++)s(i[u]);return s}({1:[function(e,t,n){function r(e){this.options=s.extend({},this.constructor.DEFAULTS,e)}var i=e("inherits-js"),s=e("../utils");e("assert");r.prototype={constructor:r,ping:function(){throw new TypeError("Method 'query' must be implemented")},query:function(e){throw new TypeError("Method 'query' must be implemented")},write:function(e){throw new TypeError("Method 'writeOne' must be implemented")}},r.DEFAULTS={},r.extend=function(e,t){return i(this,e,t)},n.Client=r},{"../utils":18,assert:"assert","inherits-js":31}],2:[function(e,t,n){function r(e,t,n){n instanceof a?e.addField(t,n):e.addField(t,l(n))}function i(e){var t,n,i,s,o,a;if(e instanceof c)return e;if(u(f.isObject(e),"Object is expected"),u(f.isString(t=e.key),"Key is expected to be a string"),n=new c(t),i=e.value,f.isUndefined(i)||r(n,"value",i),s=e.fields,f.isUndefined(s)||(u(f.isObject(s),"Fields is expected to be an object"),f.forEachIn(s,function(e,t){r(n,t,e)})),o=e.tags,f.isUndefined(o)||(u(f.isObject(o),"Tags is expected to be an object"),f.forEachIn(o,function(e,t){n.addTag(t,e)})),a=e.timestamp,!f.isUndefined(a))if(f.isString(a))n.setTimestamp(a);else if(f.isNumber(a))n.setTimestamp(a.toString());else{if(!(a instanceof Date))throw Error("String, Number, or Date is expected");n.setTimestamp(a.getTime().toString())}return n}var s,o=e("./client").Client,u=e("assert"),c=e("../measurement").Measurement,a=e("../type").Type,l=e("../type").cast,f=e("../utils");s=o.extend({injectClient:function(e){u(e instanceof o,"Client is expected"),this.client=e},query:function(e){return this.client.query(e)},ping:function(){return this.client.ping()},write:function(e,t){return u(f.isArray(e)||f.isObject(e),"Array is expected"),f.isObject(e)&&(e=[e]),this.client.write(e.map(i),t)}}),n.DecoratorClient=s},{"../measurement":13,"../type":17,"../utils":18,"./client":1,assert:"assert"}],3:[function(e,t,n){var r,i=e("./elector").Elector,s=e("./ping/ping").Ping,o=e("../../utils"),u=e("assert");r=i.extend({constructor:function(){i.prototype.constructor.apply(this,arguments),this.isPending=!1,this.pending=Promise.resolve()},injectPing:function(e){u(e instanceof s,"Ping is expected"),this.ping=e},getHost:function(){var e=this;return 1==this.hosts.length?Promise.resolve(this.hosts[0]):this.isPending?this.pending:!this.activeHost||this.lastHealthCheck+this.options.period<=Date.now()?(this.isPending=!0,this.pending=o.any(this.hosts.map(function(t){return e.ping.pong(t).then(function(){return t})})),this.pending.then(function(t){return e.lastHealthCheck=Date.now(),e.activeHost=t,e.isPending=!1,t})):Promise.resolve(this.activeHost)}},{DEFAULTS:o.extend({},i.DEFAULTS,{period:18e5})}),n.BaseElector=r},{"../../utils":18,"./elector":4,"./ping/ping":6,assert:"assert"}],4:[function(e,t,n){function r(e,t){u(s.isArray(e),"Array is expected"),u(e.length>0,"Hosts should be not empty"),e.forEach(function(e){u(e instanceof o,"Host is expected")}),this.hosts=e,this.options=s.extend({},this.constructor.DEFAULTS,t),this.lastHealthCheck=-1,this.activeHost=null}var i=e("inherits-js"),s=e("../../utils"),o=e("../host").Host,u=e("assert");r.prototype={constructor:r,getHost:function(e){throw new TypeError("Method 'getHost' should be implemented")}},r.DEFAULTS={period:0},r.extend=function(e,t){return i(this,e,t)},n.Elector=r},{"../../utils":18,"../host":9,assert:"assert","inherits-js":31}],5:[function(e,t,n){var r,i=e("./ping").Ping,s=e("../../host").Host,o=e("../../../utils"),u=e("hurl/lib/http").Http,c=e("assert");r=i.extend({injectHttp:function(e){c(e instanceof u,"Http is expected"),this.http=e},pong:function(e){var t;return c(e instanceof s,"Host is expected"),t=o.pick(this.options,["timeout"]),this.http.request(e.toString(),t).then(function(){})}},{DEFAULTS:o.extend({},i.DEFAULTS,{timeout:5e3})}),n.HttpPing=r},{"../../../utils":18,"../../host":9,"./ping":6,assert:"assert","hurl/lib/http":25}],6:[function(e,t,n){function r(e){this.options=s.extend({},this.constructor.DEFAULTS,e)}var i=e("inherits-js"),s=e("../../../utils");e("assert");r.prototype.pong=function(e){throw new TypeError("Method 'pong' should be implemented")},r.extend=function(e,t){return i(this,e,t)},r.DEFAULTS={},n.Ping=r},{"../../../utils":18,assert:"assert","inherits-js":31}],7:[function(e,t,n){var r=e("./elector").Elector,i=r.extend({constructor:function(){r.prototype.constructor.apply(this,arguments),this.index=0},getHost:function(e){var t=this.hosts[this.index];return this.index=(this.index+1)%this.hosts.length,Promise.resolve(t)}});n.RoundRobinElector=i},{"./elector":4}],8:[function(e,t,n){var r=e("./elector").Elector,i=r.extend({getHost:function(e){return Promise.resolve(this.hosts[0])}});n.StubElector=i},{"./elector":4}],9:[function(e,t,n){function r(e,t,n){i(s.isString(e),"String is expected for protocol"),i(s.isString(t),"String is expected for host"),i(s.isNumber(n),"Number is expected for port"),this.protocol=e,this.host=t,this.port=n}var i=e("assert"),s=e("./../utils");r.prototype={constructor:r,toString:function(){return this.protocol+"://"+this.host+":"+this.port}},n.Host=r},{"./../utils":18,assert:"assert"}],10:[function(e,t,n){var r,i=e("./net").NetClient,s=e("./info").Info,o=(e("../measurement").Measurement,e("./host").Host,e("assert")),u=e("hurl/lib/http").Http,c=e("../utils"),a=e("../precision");r=i.extend({constructor:function(e){i.prototype.constructor.apply(this,arguments),o(c.isObject(e),"options is expected to be an Object"),o(c.isString(e.username),"options.username is expected to be a string"),o(c.isString(e.password),"options.password is expected to be a string"),o(c.isString(e.database),"options.database is expected to be a string"),c.isUndefined(e.max_batch)||o(c.isNumber(e.max_batch),"options.max_batch is expected to be a number"),c.isUndefined(e.chunk_size)||o(c.isNumber(e.chunk_size),"options.chunk_size is expected to be a number"),a.assert(e.precision,!0,"options.precision is expected to be null or one of %values%"),a.assert(e.epoch,!0,"options.epoch is expected to be null or one of %values%")},injectHttp:function(e){o(e instanceof u,"Http is expected"),this.http=e},ping:function(){var e=this;return this.elector.getHost().then(function(t){return e._ping(t).then(function(e){return{info:e,host:t}})})},query:function(e,t){var n=this;return o(c.isString(e),"String is expected"),t=t||{},c.isUndefined(t.chunk_size)||o(c.isNumber(t.chunk_size),"options.chunk_size is expected to be a number"),a.assert(t.epoch,!0,"options.epoch is expected to be null or one of %values%"),t=c.extend({},this.options,c.pick(t,"epoch","chunk_size")),this.elector.getHost().then(function(r){var i;return i={},c.isString(t.epoch)&&(i.epoch=t.epoch),c.isNumber(t.chunk_size)&&(i.chunk_size=t.chunk_size),n.http.request(r.toString()+"/query",{method:"GET",auth:{username:t.username,password:t.password},query:c.extend(i,{db:t.database,q:e})}).then(function(e){switch(e.statusCode){case 200:return JSON.parse(e.body);case 401:return Promise.reject(new Error("InfluxDB unauthorized user"));default:return Promise.reject(new Error("InfluxDB unsuccessful status code: "+e.statusCode))}})})},write:function(e,t){var n=this;return t=t||{},o(c.isArray(e),"Array is expected"),c.isUndefined(t.max_batch)||o(c.isNumber(t.max_batch)&&t.max_batch>0,"options.max_batch is expected to be a number > 0"),a.assert(t.precision,!0,"options.precision is expected to be null or one of %values%"),t=c.extend({},this.options,c.pick(t,"precision","max_batch")),Promise.all(c.chunks(e,t.max_batch).map(function(e){return Promise.all(e.map(function(e){return n.serializer.serialize(e)})).then(function(e){return n._writeData(e.join("\n"),t)})}))},_ping:function(e){return this.http.request(e.toString()+"/ping",{method:"HEAD"}).then(function(e){var t,n,r;return 204!=e.statusCode?Promise.reject(new Error("Ping error: "+e.statusCode+": "+e.body)):(t=new s,n=e.headers["x-influxdb-version"],n&&t.setVersion(n),r=e.headers.date,r&&t.setDate(new Date(r)),t)})},_writeData:function(e,t){var n=this;return this.elector.getHost().then(function(r){var i={};return c.isString(t.precision)&&(i.precision=t.precision),n.http.request(r.toString()+"/write",{method:"POST",auth:{username:t.username,password:t.password},query:c.extend(i,{db:t.database}),data:e}).then(function(e){return new Promise(function(t,n){if(204==e.statusCode)return t();switch(e.statusCode){case 200:return n(new Error("InfluxDB could not complete request: "+e.body.toString()));case 401:return n(new Error("InfluxDB unauthorized user"));case 400:return n(new Error("InfluxDB invalid syntax"));default:return n(new Error("InfluxDB unknown status code: "+e.statusCode))}})})})}},{DEFAULTS:c.extend({},i.DEFAULTS,{username:null,password:null,database:null,max_batch:5e3,chunk_size:null,precision:null,epoch:null})}),n.HttpClient=r},{"../measurement":13,"../precision":14,"../utils":18,"./host":9,"./info":11,"./net":12,assert:"assert","hurl/lib/http":25}],11:[function(e,t,n){function r(){this.version=null,this.date=null}var i=e("assert"),s=e("../utils");r.prototype.setVersion=function(e){i(s.isString(e),"String is expected"),this.version=e},r.prototype.setDate=function(e){i(e instanceof Date,"Date is expected"),this.date=e},n.Info=r},{"../utils":18,assert:"assert"}],12:[function(e,t,n){var r=e("./client").Client,i=(e("./host").Host,e("./elector/elector").Elector),s=e("../serializer/serializer").Serializer,o=(e("../utils"),e("assert"));NetClient=r.extend({constructor:function(){r.prototype.constructor.apply(this,arguments),this.hosts=[]},injectSerializer:function(e){o(e instanceof s,"Serializer is expected"),this.serializer=e},injectElector:function(e){o(e instanceof i,"Elector is expected"),this.elector=e}}),n.NetClient=NetClient},{"../serializer/serializer":16,"../utils":18,"./client":1,"./elector/elector":4,"./host":9,assert:"assert"}],13:[function(e,t,n){function r(e){s(o.isString(e),"String is expected"),this.key=e,this.tags={},this.fields={},this.timestamp=null}var i=e("./type").Type,s=e("assert"),o=e("./utils");r.prototype={constructor:r,addTag:function(e,t){return s(o.isString(e),"String is expected"),s(o.isString(t),"String is expected"),s(0==this.tags.hasOwnProperty(e),"Tag with key '"+e+"' is already set"),this.tags[e]=t,this},addField:function(e,t){return s(o.isString(e)),s(t instanceof i,"Type is expected"),s(0==this.fields.hasOwnProperty(e),"Field with key '"+e+"' is already set"),this.fields[e]=t,this},setTimestamp:function(e){s(o.isNumericString(e),"Numeric string is expected :"+e),this.timestamp=e}},n.Measurement=r},{"./type":17,"./utils":18,assert:"assert"}],14:[function(e,t,n){var r=e("assert"),i=e("./utils"),s=0,o=1,u=2,c=3,a=4,l=5,f=[s,o,u,c,a,l],p={};p[s]="n",p[o]="u",p[u]="ms",p[c]="s",p[a]="m",p[l]="h",n.PRECISION=f,n.NANOSECONDS=s,n.MICROSECONDS=o,n.MILLISECONDS=u,n.SECONDS=c,n.MINUTES=a,n.HOURS=l,n.MAP=p,n.assert=function(e,t,n){var s=i.values(p);r((t?null==e:!1)||-1!=s.indexOf(e),n.replace("%values%",s.join(",")))}},{"./utils":18,assert:"assert"}],15:[function(e,t,n){function r(e,t){Object.keys(e).sort(function(e,t){return t>e?-1:e>t?1:0}).forEach(function(n){t.call(null,e[n],n,e)})}var i,s,o,u,c,a,l=e("./serializer").Serializer,f=e("../measurement").Measurement,p=e("../type").Str,h=e("../type").Bool,d=e("../type").I64,g=e("../type").F64,m=e("assert"),y=e("../utils");s=function(){var e=/ /g,t=/,/g;return function(n){return m(y.isString(n),"String is expected"),n.replace(e,"\\ ").replace(t,"\\,")}}(),o=function(){var e=/"/g;return function(t){var n;return m(y.isString(t),"String is expected"),n=t.replace(e,'\\"'),'"'+n+'"'}}(),u=function(e){return m(y.isBoolean(e),"Boolean is expected"),e?"t":"f"},a=function(e){var t;return m(y.isNumber(e),"Number is expected"),t=e.toString(),m(-1==t.indexOf("."),"Converting to integer, but float given"),t+"i"},c=function(e){return m(y.isNumber(e),"Number is expected"),e.toString()},i=l.extend({serialize:function(e){return m(e instanceof f,"Measurement is expected"),new Promise(function(t){var n,i;n=s(e.key),r(e.tags,function(e,t){n+=","+s(t)+"="+s(e)}),r(e.fields,function(){var e,t;return function(r,i){var l;switch(e?t=",":(t=" ",e=!0),!0){case r instanceof p:l=o(r.data);break;case r instanceof h:l=u(r.data);break;case r instanceof d:l=a(r.data);break;case r instanceof g:l=c(r.data);break;default:return Promise.reject(new TypeError("Unable to determine action for value type"))}n+=t+s(i)+"="+l}}()),(i=e.timestamp)&&(n+=" "+i),t(n)})}}),n.LineSerializer=i},{"../measurement":13,"../type":17,"../utils":18,"./serializer":16,assert:"assert"}],16:[function(e,t,n){function r(){}var i=e("inherits-js");r.prototype={constructor:r,serialize:function(e){throw new TypeError("Method 'serialize' must be implemented")}},r.extend=function(e,t){return i(this,e,t)},n.Serializer=r},{"inherits-js":31}],17:[function(e,t,n){function r(e){if(!(this instanceof r))throw new TypeError("Could not use type constructor without 'new' keyword");this.data=e}function i(e){var t=s.getTypeOf(e);switch(t){case"String":return new c(e);case"Number":return new a(e);case"Boolean":return new f(e);default:throw new TypeError("Could not map to the influx type: got '"+t+"'")}}var s=e("./utils"),o=e("assert"),u=e("inherits-js");r.extend=function(e,t){return u(this,e,t)};var c=r.extend({constructor:function(e){o(s.isString(e),"String is expected"),r.prototype.constructor.call(this,e)}}),a=r.extend({constructor:function(e){o(s.isNumber(e),"Number is expected"),r.prototype.constructor.call(this,e)}}),l=r.extend({constructor:function(e){o(s.isNumber(e),"Number is expected"),r.prototype.constructor.call(this,e)}}),f=r.extend({constructor:function(e){o(s.isBoolean(e),"Boolean is expected"),r.prototype.constructor.call(this,e)}});n.cast=i,n.Type=r,n.Str=c,n.F64=a,n.I64=l,n.Bool=f},{"./utils":18,assert:"assert","inherits-js":31}],18:[function(e,t,n){var r=e("assert");n.noop=function(){},n.getTypeOf=function(){var e=/\[object ([A-Z][a-z]+)\]/;return function(t){return Object.prototype.toString.call(t).replace(e,"$1")}}(),n.forEachIn=function(e,t){null!=e&&"object"==typeof e&&Object.keys(e).forEach(function(n){t.call(null,e[n],n,e)})},n.extend=function(e){return[].slice.call(arguments).forEach(function(t){n.forEachIn(t,function(t,n){e[n]=t})}),e},n.values=function(e){var t=[];return n.forEachIn(e,function(e){t.push(e)}),t},n.pick=function(e,t){var r,i;return r=n.isArray(t)?t:Array.prototype.slice.call(arguments,1),i={},n.forEachIn(e,function(e,t){-1!=r.indexOf(t)&&(i[t]=e)}),i},n.isMatch=function(e,t){var n,r,i,s;for(i=Object.keys(t),s=i.length,n=0;s>n;n++)if(r=i[n],e[r]!==t[r])return!1;return!0},n.findWhere=function(e,t){var r,i,s,o;for(o=_.isFunction(t)?t:function(e){return n.isMatch(e,t)},i=e.length,r=0;i>r;r++)if(s=e[r],o.call(null,s))return s;return null},["Object","String","Number","Boolean","Array","Undefined"].forEach(function(e){n["is"+e]=function(t){return n.getTypeOf(t)==e}}),n.isNumericString=function(){var e=/^\d*$/;return function(t){return n.isString(t)&&e.test(t)}}(),n.flatten=function(e){return e.reduce(function(e,t){return e.concat(n.isArray(t)?n.flatten(t):t)},[])},n.chunks=function(e,t){var i,s,o,u;for(r(n.isArray(e),"Array is expected to be a source"),r(n.isNumber(t),"Number is expected to be a size"),r(t>0,"Size must be a positive number"),i=0,o=[];;){if(s=i*t,u=e.slice(s,s+t),0==u.length)break;o.push(u),i++}return o},n.any=function(e){return new Promise(function(t,n){var r,i,s;s=e.length,r=!1,i=0,e.forEach(function(e){e.then(function(e){r||(r=!0,t(e))})["catch"](function(e){r||++i!=s||n(e)})})})}},{assert:"assert"}],19:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],20:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],21:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),c(r,e,r.depth)}function s(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&_(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var s=a(e,t);if(s)return s;var o=Object.keys(t),g=u(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),O(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(t);if(0===o.length){if(_(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(j(t))return e.stylize(Date.prototype.toString.call(t),"date");if(O(t))return l(t)}var y="",v=!1,x=["{","}"];if(d(t)&&(v=!0,x=["[","]"]),_(t)){var E=t.name?": "+t.name:"";y=" [Function"+E+"]"}if(w(t)&&(y=" "+RegExp.prototype.toString.call(t)),j(t)&&(y=" "+Date.prototype.toUTCString.call(t)),O(t)&&(y=" "+l(t)),0===o.length&&(!v||0==t.length))return x[0]+y+x[1];if(0>r)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=v?f(e,t,r,g,o):o.map(function(n){return p(e,t,r,g,n,v)}),e.seen.pop(),h(S,y,x)}function a(e,t){if(E(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var s=[],o=0,u=t.length;u>o;++o)D(t,String(o))?s.push(p(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(p(e,t,n,r,i,!0))}),s}function p(e,t,n,r,i,s){var o,u,a;if(a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),D(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=m(n)?c(e,a.value,null):c(e,a.value,n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),E(o)){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function h(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return null==e}function v(e){return"number"==typeof e}function b(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function E(e){return void 0===e}function w(e){return S(e)&&"[object RegExp]"===k(e)}function S(e){return"object"==typeof e&&null!==e}function j(e){return S(e)&&"[object Date]"===k(e)}function O(e){return S(e)&&("[object Error]"===k(e)||e instanceof Error)}function _(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function k(e){return Object.prototype.toString.call(e)}function z(e){return 10>e?"0"+e.toString(10):e.toString(10)}function T(){var e=new Date,t=[z(e.getHours()),z(e.getMinutes()),z(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var H=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,o=String(e).replace(H,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];s>n;u=r[++n])o+=m(u)||!S(u)?" "+u:" "+i(u);return o},n.deprecate=function(e,i){function s(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}if(E(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return s};var C,U={};n.debuglog=function(e){if(E(C)&&(C=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!U[e])if(new RegExp("\\b"+e+"\\b","i").test(C)){var r=t.pid;U[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else U[e]=function(){};return U[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=y,n.isNumber=v,n.isString=b,n.isSymbol=x,n.isUndefined=E,n.isRegExp=w,n.isObject=S,n.isDate=j,n.isError=O,n.isFunction=_,n.isPrimitive=A,n.isBuffer=e("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":20,_process:22,inherits:19}],22:[function(e,t,n){function r(){l=!1,u.length?a=u.concat(a):f=-1,a.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=a.length;t;){for(u=a,a=[];++f<t;)u&&u[f].run();f=-1,t=a.length}u=null,l=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var u,c=t.exports={},a=[],l=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new s(e,t)),1!==a.length||l||setTimeout(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=o,c.addListener=o,c.once=o,c.off=o,c.removeListener=o,c.removeAllListeners=o,c.emit=o,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],23:[function(e,t,n){var r,i=e("inherits-js");r=i(Error,{constructor:function(){var e;e=Error.apply(null,arguments),this._error=e,this.message=e.message,this.stack=e.stack?e.stack.replace(new RegExp("^Error"),this.name):null}},{extend:function(e,t){return i(this,e,t)}}),n.HttpError=r},{"inherits-js":31}],24:[function(e,t,n){var r,i=e("../error").HttpError;r=i.extend({}),n.TimeoutHttpError=r},{"../error":23}],25:[function(e,t,n){var r,i=e("./utils"),s=e("inherits-js"),o=e("assert"),u=e("debug"),c=e("events").EventEmitter;r=s(c,{constructor:function(e){var t=this;c.call(this),this.options=i.extend({},this.constructor.DEFAULTS,e),this.logger=["debug","info","notice","warning","error","critical","alert","emergency"].reduce(function(e,n){var r;return r=u("hurl:"+n),e[n]=function(){var e;e=Array.prototype.slice.call(arguments),r.apply(null,e),t.emit.apply(t,["log:"+n].concat(e))},e},{})},injectUUID:function(e){o(i.isEmpty(this.uuid),"UUID is already set"),o("function"==typeof e,"UUID is expected to be a function"),this.uuid=e},genUUID:function(e){return o(i.isUndefined(e)||i.isString(e),"String is expected"),this.uuid?this.uuid.call(null,e):i.uniqueId(e)},request:function(e,t){throw new Error("Method must be implemented")}},{extend:function(e,t){return s(this,e,t)},DEFAULTS:{}}),n.Http=r},{"./utils":26,assert:"assert",debug:28,events:"events","inherits-js":31}],26:[function(e,t,n){function r(e){return Object.prototype.toString.call(e).replace(/\[object ([A-Z][a-z]+)\]/,"$1")}function i(e,t,r){return t.forEach(function(t){n.forEach(t,function(t,n){r&&void 0!==e[n]||(e[n]=t)})}),e}["String","Object","Array","Undefined"].forEach(function(e){n["is"+e]=function(t){return r(t)==e}}),n.defaults=function(e){return i(e,[].slice.call(arguments,1),!0)},n.extend=function(e){return i(e,[].slice.call(arguments,1),!1)},n.forEach=function(e,t){return n.isArray(e)?void e.forEach(t):n.isObject(e)?void Object.keys(e).forEach(function(n){t.call(null,e[n],n,e)}):void 0},n.isEmpty=function(e){return null==e?!0:n.isArray(e)||n.isString(e)?0===e.length:0===Object.keys(e).length},n.contains=function(e,t){return-1!=e.indexOf(t)};var s={},o=0;n.uniqueId=function(e){return n.isString(e)?(n.isUndefined(s[e])&&(s[e]=0),++s[e]):++o}},{}],27:[function(e,t,n){var r,i=e("./http").Http,s=e("./utils"),o=e("./error").HttpError,u=e("querystring"),c=e("./error/timeout").TimeoutHttpError;r=i.extend({request:function(e,t){var n,r,i=this;return r={href:e,uuid:this.genUUID("req.out")},t=s.defaults(t||{},{method:"GET"}),n=this.getTime(),new Promise(function(a,l){var f,p,h,d,g,m,y,v;if(f=t.method,h=t.data,s.contains(["GET","HEAD"],f)&&h)throw y=new o("Could not add body to the GET|HEAD requests"),i.logger.fatal("Http request could not be prepared",{context:t,error:y,namespace:"http",tags:"error"}),y;s.isEmpty(p=t.query)||(e=e+(-1!==e.indexOf("?")?"&":"?")+u.encode(p)),v=new XMLHttpRequest,(m=t.headers)&&s.forEach(m,function(e,t){v.setRequestHeader(t,e)}),(g=t.timeout)&&(v.timeout=g),v.ontimeout=function(){l(new c)},v.onabort=function(){l(new o("Aborted"))},v.onerror=function(e){l(new o)},v.onreadystatechange=function(){var e,t,o,u;4==this.readyState&&(e=this.status,t=this.responseText,o=i.extractHeaders(v.getAllResponseHeaders()),u=i.byteLength(t)/1024,i.logger.debug("Received http response",{namespace:"http",tags:"http,response",context:s.extend({duration:i.getTime()-n,body:10>u?t:"...",length:Math.ceil(u)+"KB",status:e,headers:o},r)}),a({body:t,statusCode:e,headers:o}))},i.logger.debug("Sending http request",{context:s.extend({},t,r),namespace:"http",tags:"http,request"});try{v.open(f,e,!0)}catch(b){return void l(b)}(d=t.auth)&&v.setRequestHeader("Authorization",i.getAuthString(d.username,d.password)),v.send(h)})},getTime:function(){return(new Date).getTime()},byteLength:function(e){for(var t=e.length,n=e.length-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&2047>=r?t++:r>2047&&65535>=r&&(t+=2),r>=56320&&57343>=r&&n--}return t},extractHeaders:function(){var e;return e=/([a-z\-]+):\s*([^\n]+)\n?/gi,function(t){var n,r;for(n={};r=e.exec(t);)n[r[1].toLowerCase()]=r[2];return n}}(),getAuthString:function(e,t){return"Basic "+btoa([e,t].map(function(e){return decodeURIComponent(e)}).join(":"))}}),n.XhrHttp=r},{"./error":23,"./error/timeout":24,"./http":25,"./utils":26,querystring:"querystring"}],28:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,s=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(s=i))}),e.splice(s,0,r),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function u(){var e;try{e=n.storage.debug}catch(t){}return e}function c(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=s,n.formatArgs=i,n.save=o,n.load=u,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(u())},{"./debug":29}],29:[function(e,t,n){function r(){return n.colors[l++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,s=t-(a||t);e.diff=s,e.prev=a,e.curr=t,a=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var o=Array.prototype.slice.call(arguments);o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var u=0;o[0]=o[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;u++;var i=n.formatters[r];if("function"==typeof i){var s=o[u];t=i.call(e,s),o.splice(u,1),u--}return t}),"function"==typeof n.formatArgs&&(o=n.formatArgs.apply(e,o));var c=i.log||n.log||console.log.bind(console);c.apply(e,o)}t.enabled=!1,i.enabled=!0;var s=n.enabled(e)?i:t;return s.namespace=e,s}function s(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;r>i;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function o(){n.enable("")}function u(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function c(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i,n.coerce=c,n.disable=o,n.enable=s,n.enabled=u,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var a,l=0},{ms:30}],30:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*c;case"seconds":case"second":case"secs":case"sec":case"s":return n*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=a?Math.round(e/a)+"h":e>=c?Math.round(e/c)+"m":e>=u?Math.round(e/u)+"s":e+"ms"}function s(e){return o(e,l,"day")||o(e,a,"hour")||o(e,c,"minute")||o(e,u,"second")||e+" ms"}function o(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var u=1e3,c=60*u,a=60*c,l=24*a,f=365.25*l;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?s(e):i(e)}},{}],31:[function(e,t,n){var r=e("./utils/extend");t.exports=function(e,t,n){function i(){}var s;return t=t||{},n=n||{},s=t.hasOwnProperty("constructor")&&"function"==typeof t.constructor?t.constructor:function(){
e.apply(this,arguments)},r(s,e,n),i.prototype=e.prototype,s.prototype=new i,r(s.prototype,t),s.prototype.constructor=s,s}},{"./utils/extend":33}],32:[function(e,t,n){t.exports=function(e,t,n){var r;n||(n=null);for(var i in e)if(e.hasOwnProperty(i)&&(r=t.call(n,e[i],i,e),void 0!==r))return r;return r}},{}],33:[function(e,t,n){var r=e("./each");t.exports=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=function(t,n){e[n]=t},i=0;i<t.length;i++)r(t[i],n);return e}},{"./each":32}],34:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var u=1e3;i&&"number"==typeof i.maxKeys&&(u=i.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var a=0;c>a;++a){var l,f,p,h,d=e[a].replace(o,"%20"),g=d.indexOf(n);g>=0?(l=d.substr(0,g),f=d.substr(g+1)):(l=d,f=""),p=decodeURIComponent(l),h=decodeURIComponent(f),r(s,p)?Array.isArray(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s}},{}],35:[function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var s=encodeURIComponent(r(i))+n;return Array.isArray(e[i])?e[i].map(function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[i]))}).join(t):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(e)):""}},{}],assert:[function(e,t,n){function r(e,t){return h.isUndefined(t)?""+t:h.isNumber(t)&&!isFinite(t)?t.toString():h.isFunction(t)||h.isRegExp(t)?t.toString():t}function i(e,t){return h.isString(e)?e.length<t?e:e.slice(0,t):e}function s(e){return i(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,r),128)}function o(e,t,n,r,i){throw new m.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function u(e,t){e||o(e,!0,t,"==",m.ok)}function c(e,t){if(e===t)return!0;if(h.isBuffer(e)&&h.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return h.isDate(e)&&h.isDate(t)?e.getTime()===t.getTime():h.isRegExp(e)&&h.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:h.isObject(e)||h.isObject(t)?l(e,t):e==t}function a(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(h.isNullOrUndefined(e)||h.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(h.isPrimitive(e)||h.isPrimitive(t))return e===t;var n=a(e),r=a(t);if(n&&!r||!n&&r)return!1;if(n)return e=d.call(e),t=d.call(t),c(e,t);var i,s,o=y(e),u=y(t);if(o.length!=u.length)return!1;for(o.sort(),u.sort(),s=o.length-1;s>=0;s--)if(o[s]!=u[s])return!1;for(s=o.length-1;s>=0;s--)if(i=o[s],!c(e[i],t[i]))return!1;return!0}function f(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function p(e,t,n,r){var i;h.isString(n)&&(r=n,n=null);try{t()}catch(s){i=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&o(i,n,"Missing expected exception"+r),!e&&f(i,n)&&o(i,n,"Got unwanted exception"+r),e&&i&&n&&!f(i,n)||!e&&i)throw i}var h=e("util/"),d=Array.prototype.slice,g=Object.prototype.hasOwnProperty,m=t.exports=u;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=s(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=t.name,u=r.indexOf("\n"+i);if(u>=0){var c=r.indexOf("\n",u+1);r=r.substring(c+1)}this.stack=r}}},h.inherits(m.AssertionError,Error),m.fail=o,m.ok=u,m.equal=function(e,t,n){e!=t&&o(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&o(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){c(e,t)||o(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){c(e,t)&&o(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&o(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){e===t&&o(e,t,n,"!==",m.notStrictEqual)},m["throws"]=function(e,t,n){p.apply(this,[!0].concat(d.call(arguments)))},m.doesNotThrow=function(e,t){p.apply(this,[!1].concat(d.call(arguments)))},m.ifError=function(e){if(e)throw e};var y=Object.keys||function(e){var t=[];for(var n in e)g.call(e,n)&&t.push(n);return t}},{"util/":21}],events:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,c,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),c=1;r>c;c++)s[c-1]=arguments[c];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),c=1;r>c;c++)s[c-1]=arguments[c];for(a=n.slice(),r=a.length,c=0;r>c;c++)a[c].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,u;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){r=u;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],influent:[function(e,t,n){function r(e){return new b(e.protocol,e.host,e.port)}function i(e){var t,n;if(n=e.server,_.isObject(n))t=[r(n)];else{if(!_.isArray(n))throw new Error("Object or Array is expected for config.server");t=n.map(r)}return t}function s(e){return e.ping().then(function(){var t;return t=new a,t.injectClient(e),t})}var o=e("./lib/client/client").Client,u=e("./lib/client/net").NetClient,c=e("./lib/client/http").HttpClient,a=e("./lib/client/decorator").DecoratorClient,l=e("./lib/serializer/serializer").Serializer,f=e("./lib/serializer/line").LineSerializer,p=e("./lib/type").Str,h=e("./lib/type").I64,d=e("./lib/type").F64,g=e("./lib/type").Bool,m=e("./lib/measurement").Measurement,y=e("hurl/lib/http").Http,v=e("hurl/lib/xhr").XhrHttp,b=e("./lib/client/host").Host,x=e("./lib/client/elector/elector").Elector,E=e("./lib/client/elector/base").BaseElector,w=e("./lib/client/elector/rr").RoundRobinElector,S=e("./lib/client/elector/stub").StubElector,j=e("./lib/client/elector/ping/http").HttpPing,O=e("assert"),_=e("./lib/utils");n.Client=o,n.NetClient=u,n.HttpClient=c,n.Http=y,n.XhrHttp=v,n.Serializer=l,n.LineSerializer=f,n.Measurement=m,n.Host=b,n.Elector=x,n.BaseElector=E,n.RoundRobinElector=w,n.StubElector=S,n.HttpPing=j,n.Str=p,n.I64=h,n.F64=d,n.Bool=g,n.createHttpClient=function(e){var t,n,r,o,u,a,l,p;return O(_.isObject(e),"Object is expected for config"),t=i(e),n=new c(_.pick(e,Object.keys(c.DEFAULTS))),n.injectSerializer(new f),n.injectHttp(new v),o=e.election,_.isObject(o)&&(l=_.pick(o,Object.keys(E.DEFAULTS)),u=o.ping,_.isObject(u)&&(p=_.pick(u,Object.keys(j.DEFAULTS)))),a=new j(p),a.injectHttp(new v),r=new E(t,l),r.injectPing(a),n.injectElector(r),s(n)}},{"./lib/client/client":1,"./lib/client/decorator":2,"./lib/client/elector/base":3,"./lib/client/elector/elector":4,"./lib/client/elector/ping/http":5,"./lib/client/elector/rr":7,"./lib/client/elector/stub":8,"./lib/client/host":9,"./lib/client/http":10,"./lib/client/net":12,"./lib/measurement":13,"./lib/serializer/line":15,"./lib/serializer/serializer":16,"./lib/type":17,"./lib/utils":18,assert:"assert","hurl/lib/http":25,"hurl/lib/xhr":27}],querystring:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":34,"./encode":35}]},{},[]))("influent")});