"use strict";!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.influent=t()}(this,function(){var e;return(e=function t(n,r,i){function s(c,u){if(!r[c]){if(!n[c]){var a="function"==typeof e&&e;if(!u&&a)return a(c,!0);if(o)return o(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[c]={exports:{}};n[c][0].call(f.exports,function(e){var t=n[c][1][e];return s(t?t:e)},f,f.exports,t,n,r,i)}return r[c].exports}for(var o="function"==typeof e&&e,c=0;c<i.length;c++)s(i[c]);return s}({1:[function(e,t,n){var r,i=e("inherits-js"),s=e("./utils"),o=e("assert"),c=e("./measurement").Measurement,u=e("./precision"),a=e("./consistency");r=function(e){if(!s.isUndefined(e)){o(s.isObject(e),"Object is expected");var t=e.database;s.isUndefined(t)||(o(s.isString(t),"String is expected"),this.database=t);var n=e.rp;s.isUndefined(n)||(o(s.isString(n),"String is expected"),this.rp=n);var r=e.precision;s.isUndefined(r)||(o(s.isString(r),"String is expected"),o(u.isValid(r),"precision is expected to be one of "+u.VALUES),this.precision=r);var i=e.consistency;s.isUndefined(i)||(o(s.isString(i),"String is expected"),o(a.isValid(i),"consistency is expected to be one of "+a.VALUES),this.consistency=i)}this.list=[]},r.prototype={constructor:r,add:function(e){o(e instanceof c,"Measurement is expected"),this.list.push(e)},measurements:function(){return this.list},options:function(){var e=this;return["database","precision","rp","consistency"].reduce(function(t,n){var r=e[n];return s.isUndefined(r)||(t[n]=r),t},{})}},r.extend=function(e,t){return i(this,e,t)},n.Batch=r},{"./consistency":14,"./measurement":15,"./precision":16,"./utils":21,assert:"assert","inherits-js":34}],2:[function(e,t,n){function r(e){this.options=s.extend({},this.constructor.DEFAULTS,e)}var i=e("inherits-js"),s=e("../utils");e("assert");r.prototype={constructor:r,ping:function(){throw new TypeError("Method 'query' must be implemented")},query:function(e){throw new TypeError("Method 'query' must be implemented")},write:function(e){throw new TypeError("Method 'writeOne' must be implemented")}},r.DEFAULTS={},r.extend=function(e,t){return i(this,e,t)},n.Client=r},{"../utils":21,assert:"assert","inherits-js":34}],3:[function(e,t,n){function r(e,t,n){n instanceof a?e.addField(t,n):e.addField(t,l(n))}function i(e){var t,n,i,s,o,a;if(e instanceof u)return e;if(c(g.isObject(e),"Object is expected"),c(g.isString(t=e.key),"Key is expected to be a string"),n=new u(t),i=e.value,g.isUndefined(i)||r(n,"value",i),s=e.fields,g.isUndefined(s)||(c(g.isObject(s),"Fields is expected to be an object"),g.forEachIn(s,function(e,t){r(n,t,e)})),c(Object.keys(n.fields).length>0,"Measurement should have at least one field"),o=e.tags,g.isUndefined(o)||(c(g.isObject(o),"Tags is expected to be an object"),g.forEachIn(o,function(e,t){n.addTag(t,e)})),a=e.timestamp,!g.isUndefined(a))if(g.isString(a))n.setTimestamp(a);else if(g.isNumber(a))n.setTimestamp(a.toString());else{if(!(a instanceof Date))throw Error("String, Number, or Date is expected");n.setTimestamp(a.getTime().toString())}return n}var s,o=e("./client").Client,c=e("assert"),u=e("../measurement").Measurement,a=e("../type").Type,l=e("../type").cast,f=e("../precision"),p=e("../consistency"),h=e("../query").Query,d=e("../batch").Batch,g=e("../utils");s=function(e){g.isObject(e)&&(g.isUndefined(e.database)||c(g.isString(e.database),"options.database is expected to be a string"),g.isUndefined(e.max_batch)||c(g.isNumber(e.max_batch),"options.max_batch is expected to be a number"),g.isUndefined(e.rp)||c(g.isString(e.rp),"options.rp is expected to be a string"),g.isUndefined(e.precision)||(c(g.isString(e.precision),"options.precision is expected to be a string"),c(f.isValid(e.precision),"options.precision is expected to be one of "+f.VALUES)),g.isUndefined(e.consistency)||(c(g.isString(e.consistency),"options.consistency is expected to be a string"),c(p.isValid(e.consistency),"options.consistency is expected to be one of "+p.VALUES)),g.isUndefined(e.chunk_size)||c(g.isNumber(e.chunk_size),"options.chunk_size is expected to be a number"),g.isUndefined(e.epoch)||(c(g.isString(e.epoch),"options.epoch is expected to be a string"),c(f.isValid(e.epoch),"options.epoch is expected to be one of "+f.VALUES))),this.options=g.extend({},this.constructor.DEFAULTS,e||{})},s.prototype={constructor:s,injectClient:function(e){c(e instanceof o,"Client is expected"),this.client=e},ping:function(){return this.client.ping()},query:function(e,t){var n;return n=e instanceof h?e:new h(e,g.extend(g.pick(this.options,["database","epoch","chunk_size"]),t)),this.client.query(n)},write:function(e,t){var n,r,s,o=this;return e instanceof d?n=[e]:(c(g.isArray(e)||g.isObject(e),"Array or Object is expected"),r=g.extend(g.pick(this.options,["database","precision","rp","consistency"]),t||{}),g.isObject(t)&&!g.isUndefined(t.max_batch)?(c(g.isNumber(t.max_batch),"options.max_batch should be a number"),s=t.max_batch):s=this.options.max_batch,n=g.chunks((g.isObject(e)?[e]:e).map(i),s).map(function(e){var t=new d(r);return e.forEach(t.add.bind(t)),t})),Promise.all(n.map(function(e){return o.client.write(e)}))}},s.extend=function(e,t){return inherits(this,e,t)},s.DEFAULTS={max_batch:5e3},s.OPTIONS=["max_batch","database","rp","precision","consistency","chunk_size","epoch"],n.DecoratorClient=s},{"../batch":1,"../consistency":14,"../measurement":15,"../precision":16,"../query":17,"../type":20,"../utils":21,"./client":2,assert:"assert"}],4:[function(e,t,n){var r,i=e("./elector").Elector,s=e("./ping/ping").Ping,o=e("../../utils"),c=e("assert");r=i.extend({constructor:function(){i.prototype.constructor.apply(this,arguments),this.isPending=!1,this.pending=Promise.resolve()},injectPing:function(e){c(e instanceof s,"Ping is expected"),this.ping=e},getHost:function(){var e=this;return 1==this.hosts.length?Promise.resolve(this.hosts[0]):this.isPending?this.pending:!this.activeHost||this.lastHealthCheck+this.options.period<=Date.now()?(this.isPending=!0,this.pending=o.any(this.hosts.map(function(t){return e.ping.pong(t).then(function(){return t})})),this.pending.then(function(t){return e.lastHealthCheck=Date.now(),e.activeHost=t,e.isPending=!1,t})):Promise.resolve(this.activeHost)}},{DEFAULTS:o.extend({},i.DEFAULTS,{period:18e5})}),n.BaseElector=r},{"../../utils":21,"./elector":5,"./ping/ping":7,assert:"assert"}],5:[function(e,t,n){function r(e,t){c(s.isArray(e),"Array is expected"),c(e.length>0,"Hosts should be not empty"),e.forEach(function(e){c(e instanceof o,"Host is expected")}),this.hosts=e,this.options=s.extend({},this.constructor.DEFAULTS,t),this.lastHealthCheck=-1,this.activeHost=null}var i=e("inherits-js"),s=e("../../utils"),o=e("../host").Host,c=e("assert");r.prototype={constructor:r,getHost:function(e){throw new TypeError("Method 'getHost' should be implemented")}},r.DEFAULTS={period:0},r.extend=function(e,t){return i(this,e,t)},n.Elector=r},{"../../utils":21,"../host":10,assert:"assert","inherits-js":34}],6:[function(e,t,n){var r,i=e("./ping").Ping,s=e("../../host").Host,o=e("../../../utils"),c=e("hurl/lib/http").Http,u=e("assert");r=i.extend({injectHttp:function(e){u(e instanceof c,"Http is expected"),this.http=e},pong:function(e){var t;return u(e instanceof s,"Host is expected"),t=o.pick(this.options,["timeout"]),this.http.request(e.toString(),t).then(function(){})}},{DEFAULTS:o.extend({},i.DEFAULTS,{timeout:5e3})}),n.HttpPing=r},{"../../../utils":21,"../../host":10,"./ping":7,assert:"assert","hurl/lib/http":28}],7:[function(e,t,n){function r(e){this.options=s.extend({},this.constructor.DEFAULTS,e)}var i=e("inherits-js"),s=e("../../../utils");e("assert");r.prototype.pong=function(e){throw new TypeError("Method 'pong' should be implemented")},r.extend=function(e,t){return i(this,e,t)},r.DEFAULTS={},n.Ping=r},{"../../../utils":21,assert:"assert","inherits-js":34}],8:[function(e,t,n){var r=e("./elector").Elector,i=r.extend({constructor:function(){r.prototype.constructor.apply(this,arguments),this.index=0},getHost:function(e){var t=this.hosts[this.index];return this.index=(this.index+1)%this.hosts.length,Promise.resolve(t)}});n.RoundRobinElector=i},{"./elector":5}],9:[function(e,t,n){var r=e("./elector").Elector,i=r.extend({getHost:function(e){return Promise.resolve(this.hosts[0])}});n.StubElector=i},{"./elector":5}],10:[function(e,t,n){function r(e,t,n){i(s.isString(e),"String is expected for protocol"),i(s.isString(t),"String is expected for host"),i(s.isNumber(n),"Number is expected for port"),this.protocol=e,this.host=t,this.port=n}var i=e("assert"),s=e("./../utils");r.prototype={constructor:r,toString:function(){return this.protocol+"://"+this.host+":"+this.port}},n.Host=r},{"./../utils":21,assert:"assert"}],11:[function(e,t,n){function r(e){var t,n=e.body.toString();try{if(t=JSON.parse(n),1==Object.keys(t).length&&p.isString(t.error))return t.error}catch(r){}return n}function i(e){return Object.keys(e).reduce(function(t,n){var r=h[n],i=e[n];return r?t[r]=i:t[n]=e[n],t},{})}var s,o=e("./net").NetClient,c=e("./info").Info,u=e("../batch").Batch,a=e("../query").Query,l=e("assert"),f=e("hurl/lib/http").Http,p=e("../utils");e("../precision");s=o.extend({constructor:function(e){o.prototype.constructor.apply(this,arguments),l(p.isObject(e),"options is expected to be an Object"),l(p.isString(e.username),"options.username is expected to be a string"),l(p.isString(e.password),"options.password is expected to be a string")},injectHttp:function(e){l(e instanceof f,"Http is expected"),this.http=e},ping:function(){var e=this;return this.elector.getHost().then(function(t){return e._ping(t).then(function(e){return{info:e,host:t}})})},query:function(e){var t=this;return l(e instanceof a,"Query is expected"),this.elector.getHost().then(function(n){return t.http.request(n.toString()+"/query",{method:"GET",auth:{username:t.options.username,password:t.options.password},query:p.extend({q:e.command()},i(e.options()))}).then(function(e){switch(e.statusCode){case 200:return JSON.parse(e.body);case 401:return Promise.reject(new Error("InfluxDB unauthorized user: "+r(e)));default:return Promise.reject(new Error("InfluxDB unknown status code: "+e.statusCode+": "+e.body.toString()))}})})},write:function(e){var t=this;return l(e instanceof u,"Batch is expected"),Promise.all(e.measurements().map(function(e){return t.serializer.serialize(e)})).then(function(n){return t._writeData(n.join("\n"),i(e.options()))})},_ping:function(e){return this.http.request(e.toString()+"/ping",{method:"HEAD"}).then(function(e){var t,n,r;return 204!=e.statusCode?Promise.reject(new Error("Ping error: "+e.statusCode+": "+e.body)):(t=new c,n=e.headers["x-influxdb-version"],n&&t.setVersion(n),r=e.headers.date,r&&t.setDate(new Date(r)),t)})},_writeData:function(e,t){var n=this;return this.elector.getHost().then(function(i){return n.http.request(i.toString()+"/write",{method:"POST",auth:{username:n.options.username,password:n.options.password},query:t,data:e}).then(function(e){return new Promise(function(t,n){if(204==e.statusCode)return t();switch(e.statusCode){case 200:return n(new Error("InfluxDB could not complete request: "+r(e)));case 401:return n(new Error("InfluxDB unauthorized user: "+r(e)));case 400:return n(new Error("InfluxDB invalid syntax: "+r(e)));case 500:return n(new Error("InfluxDB is overloaded or significantly impaired: "+r(e)));default:return n(new Error("InfluxDB unknown status code: "+e.statusCode+": "+e.body.toString()))}})})})}},{DEFAULTS:p.extend({},o.DEFAULTS,{username:null,password:null})});var h={database:"db"};n.HttpClient=s},{"../batch":1,"../precision":16,"../query":17,"../utils":21,"./info":12,"./net":13,assert:"assert","hurl/lib/http":28}],12:[function(e,t,n){function r(){this.version=null,this.date=null}var i=e("assert"),s=e("../utils");r.prototype.setVersion=function(e){i(s.isString(e),"String is expected"),this.version=e},r.prototype.setDate=function(e){i(e instanceof Date,"Date is expected"),this.date=e},n.Info=r},{"../utils":21,assert:"assert"}],13:[function(e,t,n){var r,i=e("./client").Client,s=(e("./host").Host,e("./elector/elector").Elector),o=e("../serializer/serializer").Serializer,c=(e("../utils"),e("assert"));r=i.extend({constructor:function(){i.prototype.constructor.apply(this,arguments),this.hosts=[]},injectSerializer:function(e){c(e instanceof o,"Serializer is expected"),this.serializer=e},injectElector:function(e){c(e instanceof s,"Elector is expected"),this.elector=e}}),n.NetClient=r},{"../serializer/serializer":19,"../utils":21,"./client":2,"./elector/elector":5,"./host":10,assert:"assert"}],14:[function(e,t,n){var r=(e("assert"),e("./utils"),"one"),i="quorum",s="all",o="any",c=[r,i,s,o];n.ONE=r,n.QUORUM=i,n.ALL=s,n.ANY=o,n.VALUES=c,n.isValid=function(e){return-1!=c.indexOf(e)}},{"./utils":21,assert:"assert"}],15:[function(e,t,n){function r(e){s(o.isString(e),"String is expected"),this.key=e,this.tags={},this.fields={},this.timestamp=null}var i=e("./type").Type,s=e("assert"),o=e("./utils");r.prototype={constructor:r,addTag:function(e,t){return s(o.isString(e),"String is expected"),s(o.isString(t),"String is expected"),s(0==this.tags.hasOwnProperty(e),"Tag with key '"+e+"' is already set"),this.tags[e]=t,this},addField:function(e,t){return s(o.isString(e)),s(t instanceof i,"Type is expected"),s(0==this.fields.hasOwnProperty(e),"Field with key '"+e+"' is already set"),this.fields[e]=t,this},setTimestamp:function(e){return s(o.isNumericString(e),"Numeric string is expected :"+e),this.timestamp=e,this}},n.Measurement=r},{"./type":20,"./utils":21,assert:"assert"}],16:[function(e,t,n){var r=(e("assert"),e("./utils"),"n"),i="u",s="ms",o="s",c="m",u="h",a=[r,i,s,o,c,u];n.NANOSECONDS=r,n.MICROSECONDS=i,n.MILLISECONDS=s,n.SECONDS=o,n.MINUTES=c,n.HOURS=u,n.VALUES=a,n.isValid=function(e){return-1!=a.indexOf(e)}},{"./utils":21,assert:"assert"}],17:[function(e,t,n){var r,i=e("inherits-js"),s=e("./utils"),o=e("assert"),c=(e("./measurement"),e("./precision"));e("./consistency");r=function(e,t){o(s.isString(e),"String is expected"),this.cmd=e,o(s.isObject(t),"Object is expected");var n=t.database;s.isUndefined(n)||(o(s.isString(n),"String is expected"),this.database=n);var r=t.epoch;s.isUndefined(r)||(o(s.isString(r),"String is expected"),o(c.isValid(r),"epoch is expected to be one of "+c.VALUES),this.epoch=r);var i=t.chunk_size;s.isUndefined(i)||(o(s.isNumber(i),"Number is expected"),this.chunk_size=i)},r.prototype={constructor:r,command:function(){return this.cmd},options:function(){var e=this;return["database","epoch","chunk_size"].reduce(function(t,n){var r=e[n];return s.isUndefined(r)||(t[n]=r),t},{})}},r.extend=function(e,t){return i(this,e,t)},n.Query=r},{"./consistency":14,"./measurement":15,"./precision":16,"./utils":21,assert:"assert","inherits-js":34}],18:[function(e,t,n){function r(e,t){Object.keys(e).sort(function(e,t){return t>e?-1:e>t?1:0}).forEach(function(n){t.call(null,e[n],n,e)})}var i,s,o,c,u,a,l=e("./serializer").Serializer,f=e("../measurement").Measurement,p=e("../type").Str,h=e("../type").Bool,d=e("../type").I64,g=e("../type").F64,m=e("assert"),y=e("../utils");s=function(){var e=/ /g,t=/,/g;return function(n){return m(y.isString(n),"String is expected"),n.replace(e,"\\ ").replace(t,"\\,")}}(),o=function(){var e=/"/g;return function(t){var n;return m(y.isString(t),"String is expected"),n=t.replace(e,'\\"'),'"'+n+'"'}}(),c=function(e){return m(y.isBoolean(e),"Boolean is expected"),e?"t":"f"},a=function(e){var t;return m(y.isNumber(e),"Number is expected"),t=e.toString(),m(-1==t.indexOf("."),"Converting to integer, but float given"),t+"i"},u=function(e){return m(y.isNumber(e),"Number is expected"),e.toString()},i=l.extend({serialize:function(e){return m(e instanceof f,"Measurement is expected"),new Promise(function(t){var n,i;n=s(e.key),r(e.tags,function(e,t){n+=","+s(t)+"="+s(e)}),r(e.fields,function(){var e,t;return function(r,i){var l;switch(e?t=",":(t=" ",e=!0),!0){case r instanceof p:l=o(r.data);break;case r instanceof h:l=c(r.data);break;case r instanceof d:l=a(r.data);break;case r instanceof g:l=u(r.data);break;default:return Promise.reject(new TypeError("Unable to determine action for value type"))}n+=t+s(i)+"="+l}}()),(i=e.timestamp)&&(n+=" "+i),t(n)})}}),n.LineSerializer=i},{"../measurement":15,"../type":20,"../utils":21,"./serializer":19,assert:"assert"}],19:[function(e,t,n){function r(){}var i=e("inherits-js");r.prototype={constructor:r,serialize:function(e){throw new TypeError("Method 'serialize' must be implemented")}},r.extend=function(e,t){return i(this,e,t)},n.Serializer=r},{"inherits-js":34}],20:[function(e,t,n){function r(e){if(!(this instanceof r))throw new TypeError("Could not use type constructor without 'new' keyword");this.data=e}function i(e){var t=s.getTypeOf(e);switch(t){case"String":return new u(e);case"Number":return new a(e);case"Boolean":return new f(e);default:throw new TypeError("Could not map to the influx type: got '"+t+"'")}}var s=e("./utils"),o=e("assert"),c=e("inherits-js");r.extend=function(e,t){return c(this,e,t)};var u=r.extend({constructor:function(e){o(s.isString(e),"String is expected"),r.prototype.constructor.call(this,e)}}),a=r.extend({constructor:function(e){o(s.isNumber(e),"Number is expected"),r.prototype.constructor.call(this,e)}}),l=r.extend({constructor:function(e){o(s.isNumber(e),"Number is expected"),r.prototype.constructor.call(this,e)}}),f=r.extend({constructor:function(e){o(s.isBoolean(e),"Boolean is expected"),r.prototype.constructor.call(this,e)}});n.cast=i,n.Type=r,n.Str=u,n.F64=a,n.I64=l,n.Bool=f},{"./utils":21,assert:"assert","inherits-js":34}],21:[function(e,t,n){var r=e("assert");n.noop=function(){},n.getTypeOf=function(){var e=/\[object ([A-Z][a-z]+)\]/;return function(t){return Object.prototype.toString.call(t).replace(e,"$1")}}(),n.forEachIn=function(e,t){null!=e&&"object"==typeof e&&Object.keys(e).forEach(function(n){t.call(null,e[n],n,e)})},n.extend=function(e){return[].slice.call(arguments).forEach(function(t){n.forEachIn(t,function(t,n){e[n]=t})}),e},n.values=function(e){var t=[];return n.forEachIn(e,function(e){t.push(e)}),t},n.pick=function(e,t){var r,i;return r=n.isArray(t)?t:Array.prototype.slice.call(arguments,1),i={},n.forEachIn(e,function(e,t){-1!=r.indexOf(t)&&(i[t]=e)}),i},n.isMatch=function(e,t){var n,r,i,s;for(i=Object.keys(t),s=i.length,n=0;s>n;n++)if(r=i[n],e[r]!==t[r])return!1;return!0},n.findWhere=function(e,t){var r,i,s,o;for(o=_.isFunction(t)?t:function(e){return n.isMatch(e,t)},i=e.length,r=0;i>r;r++)if(s=e[r],o.call(null,s))return s;return null},["Object","String","Number","Boolean","Array","Undefined"].forEach(function(e){n["is"+e]=function(t){return n.getTypeOf(t)==e}}),n.isNumericString=function(){var e=/^\d*$/;return function(t){return n.isString(t)&&e.test(t)}}(),n.flatten=function(e){return e.reduce(function(e,t){return e.concat(n.isArray(t)?n.flatten(t):t)},[])},n.chunks=function(e,t){var i,s,o,c;for(r(n.isArray(e),"Array is expected to be a source"),r(n.isNumber(t),"Number is expected to be a size"),r(t>0,"Size must be a positive number"),i=0,o=[];;){if(s=i*t,c=e.slice(s,s+t),0==c.length)break;o.push(c),i++}return o},n.any=function(e){return new Promise(function(t,n){var r,i,s;s=e.length,r=!1,i=0,e.forEach(function(e){e.then(function(e){r||(r=!0,t(e))})["catch"](function(e){r||++i!=s||n(e)})})})}},{assert:"assert"}],22:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],23:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],24:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),u(r,e,r.depth)}function s(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function o(e,t){return e}function c(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&U(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return v(i)||(i=u(e,i,r)),i}var s=a(e,t);if(s)return s;var o=Object.keys(t),g=c(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),j(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(t);if(0===o.length){if(U(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(O(t))return e.stylize(Date.prototype.toString.call(t),"date");if(j(t))return l(t)}var y="",b=!1,x=["{","}"];if(d(t)&&(b=!0,x=["[","]"]),U(t)){var S=t.name?": "+t.name:"";y=" [Function"+S+"]"}if(E(t)&&(y=" "+RegExp.prototype.toString.call(t)),O(t)&&(y=" "+Date.prototype.toUTCString.call(t)),j(t)&&(y=" "+l(t)),0===o.length&&(!b||0==t.length))return x[0]+y+x[1];if(0>r)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return w=b?f(e,t,r,g,o):o.map(function(n){return p(e,t,r,g,n,b)}),e.seen.pop(),h(w,y,x)}function a(e,t){if(S(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):m(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var s=[],o=0,c=t.length;c>o;++o)N(t,String(o))?s.push(p(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(p(e,t,n,r,i,!0))}),s}function p(e,t,n,r,i,s){var o,c,a;if(a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},a.get?c=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(c=e.stylize("[Setter]","special")),N(r,i)||(o="["+i+"]"),c||(e.seen.indexOf(a.value)<0?(c=m(n)?u(e,a.value,null):u(e,a.value,n-1),c.indexOf("\n")>-1&&(c=s?c.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+c.split("\n").map(function(e){return"   "+e}).join("\n"))):c=e.stylize("[Circular]","special")),S(o)){if(s&&i.match(/^\d+$/))return c;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+c}function h(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function d(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return null==e}function b(e){return"number"==typeof e}function v(e){return"string"==typeof e}function x(e){return"symbol"==typeof e}function S(e){return void 0===e}function E(e){return w(e)&&"[object RegExp]"===_(e)}function w(e){return"object"==typeof e&&null!==e}function O(e){return w(e)&&"[object Date]"===_(e)}function j(e){return w(e)&&("[object Error]"===_(e)||e instanceof Error)}function U(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function _(e){return Object.prototype.toString.call(e)}function D(e){return 10>e?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),z[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var T=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,s=r.length,o=String(e).replace(T,function(e){if("%%"===e)return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),c=r[n];s>n;c=r[++n])o+=m(c)||!w(c)?" "+c:" "+i(c);return o},n.deprecate=function(e,i){function s(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}if(S(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return s};var k,C={};n.debuglog=function(e){if(S(k)&&(k=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!C[e])if(new RegExp("\\b"+e+"\\b","i").test(k)){var r=t.pid;C[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else C[e]=function(){};return C[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=m,n.isNullOrUndefined=y,n.isNumber=b,n.isString=v,n.isSymbol=x,n.isUndefined=S,n.isRegExp=E,n.isObject=w,n.isDate=O,n.isError=j,n.isFunction=U,n.isPrimitive=A,n.isBuffer=e("./support/isBuffer");var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",L(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":23,_process:25,inherits:22}],25:[function(e,t,n){function r(){l=!1,c.length?a=c.concat(a):f=-1,a.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=a.length;t;){for(c=a,a=[];++f<t;)c&&c[f].run();f=-1,t=a.length}c=null,l=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var c,u=t.exports={},a=[],l=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new s(e,t)),1!==a.length||l||setTimeout(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],26:[function(e,t,n){var r,i=e("inherits-js");r=i(Error,{constructor:function(){var e;e=Error.apply(null,arguments),this._error=e,this.message=e.message,this.stack=e.stack?e.stack.replace(new RegExp("^Error"),this.name):null}},{extend:function(e,t){return i(this,e,t)}}),n.HttpError=r},{"inherits-js":34}],27:[function(e,t,n){var r,i=e("../error").HttpError;r=i.extend({}),n.TimeoutHttpError=r},{"../error":26}],28:[function(e,t,n){var r,i=e("./utils"),s=e("inherits-js"),o=e("assert"),c=e("debug"),u=e("events").EventEmitter;r=s(u,{constructor:function(e){var t=this;u.call(this),this.options=i.extend({},this.constructor.DEFAULTS,e),this.logger=["debug","info","notice","warning","error","critical","alert","emergency"].reduce(function(e,n){var r;return r=c("hurl:"+n),e[n]=function(){var e;e=Array.prototype.slice.call(arguments),r.apply(null,e),t.emit.apply(t,["log:"+n].concat(e))},e},{})},injectUUID:function(e){o(i.isEmpty(this.uuid),"UUID is already set"),o("function"==typeof e,"UUID is expected to be a function"),this.uuid=e},genUUID:function(e){return o(i.isUndefined(e)||i.isString(e),"String is expected"),this.uuid?this.uuid.call(null,e):i.uniqueId(e)},request:function(e,t){throw new Error("Method must be implemented")}},{extend:function(e,t){return s(this,e,t)},DEFAULTS:{}}),n.Http=r},{"./utils":29,assert:"assert",debug:31,events:"events","inherits-js":34}],29:[function(e,t,n){function r(e){return Object.prototype.toString.call(e).replace(/\[object ([A-Z][a-z]+)\]/,"$1")}function i(e,t,r){return t.forEach(function(t){n.forEach(t,function(t,n){r&&void 0!==e[n]||(e[n]=t)})}),e}["String","Object","Array","Undefined"].forEach(function(e){n["is"+e]=function(t){return r(t)==e}}),n.defaults=function(e){return i(e,[].slice.call(arguments,1),!0)},n.extend=function(e){return i(e,[].slice.call(arguments,1),!1)},n.forEach=function(e,t){return n.isArray(e)?void e.forEach(t):n.isObject(e)?void Object.keys(e).forEach(function(n){t.call(null,e[n],n,e)}):void 0},n.isEmpty=function(e){return null==e?!0:n.isArray(e)||n.isString(e)?0===e.length:0===Object.keys(e).length},n.contains=function(e,t){return-1!=e.indexOf(t)};var s={},o=0;n.uniqueId=function(e){return n.isString(e)?(n.isUndefined(s[e])&&(s[e]=0),++s[e]):++o}},{}],30:[function(e,t,n){var r,i=e("./http").Http,s=e("./utils"),o=e("./error").HttpError,c=e("querystring"),u=e("./error/timeout").TimeoutHttpError;r=i.extend({request:function(e,t){var n,r,i=this;return r={href:e,uuid:this.genUUID("req.out")},t=s.defaults(t||{},{method:"GET"}),n=this.getTime(),new Promise(function(a,l){var f,p,h,d,g,m,y,b;if(f=t.method,h=t.data,s.contains(["GET","HEAD"],f)&&h)throw y=new o("Could not add body to the GET|HEAD requests"),i.logger.fatal("Http request could not be prepared",{context:t,error:y,namespace:"http",tags:"error"}),y;s.isEmpty(p=t.query)||(e=e+(-1!==e.indexOf("?")?"&":"?")+c.encode(p)),b=new XMLHttpRequest,(m=t.headers)&&s.forEach(m,function(e,t){b.setRequestHeader(t,e)}),(g=t.timeout)&&(b.timeout=g),b.ontimeout=function(){l(new u)},b.onabort=function(){l(new o("Aborted"))},b.onerror=function(e){l(new o)},b.onreadystatechange=function(){var e,t,o,c;4==this.readyState&&(e=this.status,t=this.responseText,o=i.extractHeaders(b.getAllResponseHeaders()),c=i.byteLength(t)/1024,i.logger.debug("Received http response",{namespace:"http",tags:"http,response",context:s.extend({duration:i.getTime()-n,body:10>c?t:"...",length:Math.ceil(c)+"KB",status:e,headers:o},r)}),a({body:t,statusCode:e,headers:o}))},i.logger.debug("Sending http request",{context:s.extend({},t,r),namespace:"http",tags:"http,request"});try{b.open(f,e,!0)}catch(v){return void l(v)}(d=t.auth)&&b.setRequestHeader("Authorization",i.getAuthString(d.username,d.password)),b.send(h)})},getTime:function(){return(new Date).getTime()},byteLength:function(e){for(var t=e.length,n=e.length-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&2047>=r?t++:r>2047&&65535>=r&&(t+=2),r>=56320&&57343>=r&&n--}return t},extractHeaders:function(){var e;return e=/([a-z\-]+):\s*([^\n]+)\n?/gi,function(t){var n,r;for(n={};r=e.exec(t);)n[r[1].toLowerCase()]=r[2];return n}}(),getAuthString:function(e,t){return"Basic "+btoa([e,t].map(function(e){return decodeURIComponent(e)}).join(":"))}}),n.XhrHttp=r},{"./error":26,"./error/timeout":27,"./http":28,"./utils":29,querystring:"querystring"}],31:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,s=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,
"%c"===e&&(s=i))}),e.splice(s,0,r),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function c(){var e;try{e=n.storage.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=s,n.formatArgs=i,n.save=o,n.load=c,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(c())},{"./debug":32}],32:[function(e,t,n){function r(){return n.colors[l++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,s=t-(a||t);e.diff=s,e.prev=a,e.curr=t,a=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var o=Array.prototype.slice.call(arguments);o[0]=n.coerce(o[0]),"string"!=typeof o[0]&&(o=["%o"].concat(o));var c=0;o[0]=o[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;c++;var i=n.formatters[r];if("function"==typeof i){var s=o[c];t=i.call(e,s),o.splice(c,1),c--}return t}),"function"==typeof n.formatArgs&&(o=n.formatArgs.apply(e,o));var u=i.log||n.log||console.log.bind(console);u.apply(e,o)}t.enabled=!1,i.enabled=!0;var s=n.enabled(e)?i:t;return s.namespace=e,s}function s(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;r>i;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function o(){n.enable("")}function c(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i,n.coerce=u,n.disable=o,n.enable=s,n.enabled=c,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var a,l=0},{ms:33}],33:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*c;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(e){return e>=l?Math.round(e/l)+"d":e>=a?Math.round(e/a)+"h":e>=u?Math.round(e/u)+"m":e>=c?Math.round(e/c)+"s":e+"ms"}function s(e){return o(e,l,"day")||o(e,a,"hour")||o(e,u,"minute")||o(e,c,"second")||e+" ms"}function o(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var c=1e3,u=60*c,a=60*u,l=24*a,f=365.25*l;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?s(e):i(e)}},{}],34:[function(e,t,n){var r=e("./utils/extend");t.exports=function(e,t,n){function i(){}var s;return t=t||{},n=n||{},s=t.hasOwnProperty("constructor")&&"function"==typeof t.constructor?t.constructor:function(){e.apply(this,arguments)},r(s,e,n),i.prototype=e.prototype,s.prototype=new i,r(s.prototype,t),s.prototype.constructor=s,s}},{"./utils/extend":36}],35:[function(e,t,n){t.exports=function(e,t,n){var r;n||(n=null);for(var i in e)if(e.hasOwnProperty(i)&&(r=t.call(n,e[i],i,e),void 0!==r))return r;return r}},{}],36:[function(e,t,n){var r=e("./each");t.exports=function(e){for(var t=Array.prototype.slice.call(arguments,1),n=function(t,n){e[n]=t},i=0;i<t.length;i++)r(t[i],n);return e}},{"./each":35}],37:[function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,i){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var a=0;u>a;++a){var l,f,p,h,d=e[a].replace(o,"%20"),g=d.indexOf(n);g>=0?(l=d.substr(0,g),f=d.substr(g+1)):(l=d,f=""),p=decodeURIComponent(l),h=decodeURIComponent(f),r(s,p)?Array.isArray(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s}},{}],38:[function(e,t,n){var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,i){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(i){var s=encodeURIComponent(r(i))+n;return Array.isArray(e[i])?e[i].map(function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[i]))}).join(t):i?encodeURIComponent(r(i))+n+encodeURIComponent(r(e)):""}},{}],assert:[function(e,t,n){function r(e,t){return h.isUndefined(t)?""+t:h.isNumber(t)&&!isFinite(t)?t.toString():h.isFunction(t)||h.isRegExp(t)?t.toString():t}function i(e,t){return h.isString(e)?e.length<t?e:e.slice(0,t):e}function s(e){return i(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+i(JSON.stringify(e.expected,r),128)}function o(e,t,n,r,i){throw new m.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function c(e,t){e||o(e,!0,t,"==",m.ok)}function u(e,t){if(e===t)return!0;if(h.isBuffer(e)&&h.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return h.isDate(e)&&h.isDate(t)?e.getTime()===t.getTime():h.isRegExp(e)&&h.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:h.isObject(e)||h.isObject(t)?l(e,t):e==t}function a(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(h.isNullOrUndefined(e)||h.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(h.isPrimitive(e)||h.isPrimitive(t))return e===t;var n=a(e),r=a(t);if(n&&!r||!n&&r)return!1;if(n)return e=d.call(e),t=d.call(t),u(e,t);var i,s,o=y(e),c=y(t);if(o.length!=c.length)return!1;for(o.sort(),c.sort(),s=o.length-1;s>=0;s--)if(o[s]!=c[s])return!1;for(s=o.length-1;s>=0;s--)if(i=o[s],!u(e[i],t[i]))return!1;return!0}function f(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function p(e,t,n,r){var i;h.isString(n)&&(r=n,n=null);try{t()}catch(s){i=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&o(i,n,"Missing expected exception"+r),!e&&f(i,n)&&o(i,n,"Got unwanted exception"+r),e&&i&&n&&!f(i,n)||!e&&i)throw i}var h=e("util/"),d=Array.prototype.slice,g=Object.prototype.hasOwnProperty,m=t.exports=c;m.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=s(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=t.name,c=r.indexOf("\n"+i);if(c>=0){var u=r.indexOf("\n",c+1);r=r.substring(u+1)}this.stack=r}}},h.inherits(m.AssertionError,Error),m.fail=o,m.ok=c,m.equal=function(e,t,n){e!=t&&o(e,t,n,"==",m.equal)},m.notEqual=function(e,t,n){e==t&&o(e,t,n,"!=",m.notEqual)},m.deepEqual=function(e,t,n){u(e,t)||o(e,t,n,"deepEqual",m.deepEqual)},m.notDeepEqual=function(e,t,n){u(e,t)&&o(e,t,n,"notDeepEqual",m.notDeepEqual)},m.strictEqual=function(e,t,n){e!==t&&o(e,t,n,"===",m.strictEqual)},m.notStrictEqual=function(e,t,n){e===t&&o(e,t,n,"!==",m.notStrictEqual)},m["throws"]=function(e,t,n){p.apply(this,[!0].concat(d.call(arguments)))},m.doesNotThrow=function(e,t){p.apply(this,[!1].concat(d.call(arguments)))},m.ifError=function(e){if(e)throw e};var y=Object.keys||function(e){var t=[];for(var n in e)g.call(e,n)&&t.push(n);return t}},{"util/":24}],events:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,s,u,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],c(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),u=1;r>u;u++)s[u-1]=arguments[u];n.apply(this,s)}else if(o(n)){for(r=arguments.length,s=new Array(r-1),u=1;r>u;u++)s[u-1]=arguments[u];for(a=n.slice(),r=a.length,u=0;r>u;u++)a[u].apply(this,s)}return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=c(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,s,c;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(c=s;c-->0;)if(n[c]===t||n[c].listener&&n[c].listener===t){r=c;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?i(e._events[t])?1:e._events[t].length:0}},{}],influent:[function(e,t,n){function r(e){return new S(e.protocol,e.host,e.port)}function i(e){var t,n;if(n=e.server,L.isObject(n))t=[r(n)];else{if(!L.isArray(n))throw new Error("Object or Array is expected for config.server");t=n.map(r)}return t}function s(e,t){return e.ping().then(function(){var n;return n=new a(t),n.injectClient(e),n})}var o=e("./lib/client/client").Client,c=e("./lib/client/net").NetClient,u=e("./lib/client/http").HttpClient,a=e("./lib/client/decorator").DecoratorClient,l=e("./lib/serializer/serializer").Serializer,f=e("./lib/serializer/line").LineSerializer,p=e("./lib/type").Str,h=e("./lib/type").I64,d=e("./lib/type").F64,g=e("./lib/type").Bool,m=e("./lib/measurement").Measurement,y=e("./lib/batch").Batch,b=e("./lib/batch").Query,v=e("hurl/lib/http").Http,x=e("hurl/lib/xhr").XhrHttp,S=e("./lib/client/host").Host,E=e("./lib/client/elector/elector").Elector,w=e("./lib/client/elector/base").BaseElector,O=e("./lib/client/elector/rr").RoundRobinElector,j=e("./lib/client/elector/stub").StubElector,U=e("./lib/client/elector/ping/http").HttpPing,A=e("./lib/consistency"),_=e("./lib/precision"),D=e("assert"),L=e("./lib/utils");n.Client=o,n.NetClient=c,n.HttpClient=u,n.Http=v,n.XhrHttp=x,n.Serializer=l,n.LineSerializer=f,n.Measurement=m,n.Host=S,n.Elector=E,n.BaseElector=w,n.RoundRobinElector=O,n.StubElector=j,n.HttpPing=U,n.Str=p,n.I64=h,n.F64=d,n.Bool=g,n.Batch=y,n.Query=b,n.NANOSECONDS=_.NANOSECONDS,n.MICROSECONDS=_.MICROSECONDS,n.MILLISECONDS=_.MILLISECONDS,n.SECONDS=_.SECONDS,n.MINUTES=_.MINUTES,n.HOURS=_.HOURS,n.ONE=A.ONE,n.ANY=A.ANY,n.ALL=A.ALL,n.QUORUM=A.QUORUM,n.createHttpClient=function(e){var t,n,r,o,c,l,p,h;return D(L.isObject(e),"Object is expected for config"),t=i(e),n=new u(L.pick(e,Object.keys(u.DEFAULTS))),n.injectSerializer(new f),n.injectHttp(new x),o=e.election,L.isObject(o)&&(p=L.pick(o,Object.keys(w.DEFAULTS)),c=o.ping,L.isObject(c)&&(h=L.pick(c,Object.keys(U.DEFAULTS)))),l=new U(h),l.injectHttp(new x),r=new w(t,p),r.injectPing(l),n.injectElector(r),s(n,L.pick(e,a.OPTIONS))}},{"./lib/batch":1,"./lib/client/client":2,"./lib/client/decorator":3,"./lib/client/elector/base":4,"./lib/client/elector/elector":5,"./lib/client/elector/ping/http":6,"./lib/client/elector/rr":8,"./lib/client/elector/stub":9,"./lib/client/host":10,"./lib/client/http":11,"./lib/client/net":13,"./lib/consistency":14,"./lib/measurement":15,"./lib/precision":16,"./lib/serializer/line":18,"./lib/serializer/serializer":19,"./lib/type":20,"./lib/utils":21,assert:"assert","hurl/lib/http":28,"hurl/lib/xhr":30}],querystring:[function(e,t,n){n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":37,"./encode":38}]},{},[]))("influent")});